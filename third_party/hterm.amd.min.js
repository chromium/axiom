define("hterm/character_map",["hterm/util","exports"],function(a,b){"use strict";var c=a["default"],d=function(a,b){this.name=a,this.GL=null,this.GR=null,b&&this.reset(b)};b.CharacterMap=d,b["default"]=d,d.prototype.reset=function(a){this.glmap=a;var b=Object.keys(this.glmap).map(function(a){return"\\x"+c.string.zpad(a.charCodeAt(0).toString(16))});this.glre=new RegExp("["+b.join("")+"]","g"),this.grmap={},b.forEach(function(a){var b=String.fromCharCode(128&a.charCodeAt(0));this.grmap[b]=this.glmap[a]}.bind(this));var d=Object.keys(this.grmap).map(function(a){return"\\x"+c.string.zpad(a.charCodeAt(0).toString(16),2)});this.grre=new RegExp("["+d.join("")+"]","g"),this.GL=function(a){return a.replace(this.glre,function(a){return this.glmap[a]}.bind(this))}.bind(this),this.GR=function(a){return a.replace(this.grre,function(a){return this.grmap[a]}.bind(this))}.bind(this)},d.maps={},d.maps[0]=new d("graphic",{"`":"â—†",a:"â–’",b:"â‰",c:"âŒ",d:"â",e:"âŠ",f:"Â°",g:"Â±",h:"â¤",i:"â‹",j:"â”˜",k:"â”",l:"â”Œ",m:"â””",n:"â”¼",o:"âŽº",p:"âŽ»",q:"â”€",r:"âŽ¼",s:"âŽ½",t:"â”œ",u:"â”¤",v:"â”´",w:"â”¬",x:"â”‚",y:"â‰¤",z:"â‰¥","{":"Ï€","|":"â‰ ","}":"Â£","~":"Â·"}),d.maps.A=new d("british",{"#":"Â£"}),d.maps.B=new d("us",null),d.maps[4]=new d("dutch",{"#":"Â£","@":"Â¾","[":"Ä²","\\":"Â½","]":"|","{":"Â¨","|":"f","}":"Â¼","~":"Â´"}),d.maps.C=d.maps[5]=new d("finnish",{"[":"Ã„","\\":"Ã–","]":"Ã…","^":"Ãœ","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"}),d.maps.R=new d("french",{"#":"Â£","@":"Ã ","[":"Â°","\\":"Ã§","]":"Â§","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Â¨"}),d.maps.Q=new d("french canadian",{"@":"Ã ","[":"Ã¢","\\":"Ã§","]":"Ãª","^":"Ã®","`":"Ã´","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Ã»"}),d.maps.K=new d("german",{"@":"Â§","[":"Ã„","\\":"Ã–","]":"Ãœ","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"ÃŸ"}),d.maps.Y=new d("italian",{"#":"Â£","@":"Â§","[":"Â°","\\":"Ã§","]":"Ã©","`":"Ã¹","{":"Ã ","|":"Ã²","}":"Ã¨","~":"Ã¬"}),d.maps.E=d.maps[6]=new d("norwegian/danish",{"@":"Ã„","[":"Ã†","\\":"Ã˜","]":"Ã…","^":"Ãœ","`":"Ã¤","{":"Ã¦","|":"Ã¸","}":"Ã¥","~":"Ã¼"}),d.maps.Z=new d("spanish",{"#":"Â£","@":"Â§","[":"Â¡","\\":"Ã‘","]":"Â¿","{":"Â°","|":"Ã±","}":"Ã§"}),d.maps[7]=d.maps.H=new d("swedish",{"@":"Ã‰","[":"Ã„","\\":"Ã–","]":"Ã…","^":"Ãœ","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"}),d.maps["="]=new d("swiss",{"#":"Ã¹","@":"Ã ","[":"Ã©","\\":"Ã§","]":"Ãª","^":"Ã®",_:"Ã¨","`":"Ã´","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã»"})}),define("hterm/config",["hterm/config_defs","exports"],function(a,b){"use strict";var c=a["default"],d=function(){this.values={};for(var a in c)this.values[a]=c[a][0];this.observers=[]};b.Config=d,b["default"]=d,d.prototype.get=function(a){if(!(a in this.values))throw new Error("Unknown config value: "+a);return this.values[a]},d.prototype.set=function(a,b){this.values[a]=b,this.observers.forEach(function(c){c(a,b)})},d.prototype.addObserver=function(a){this.observers.push(a)},d.prototype.removeObserver=function(a){var b=this.observers.indexOf(a);this.observers.splice(b,1)}}),define("hterm/config_defs",["exports"],function(a){"use strict";var b={"alt-backspace-is-meta-backspace":[!1,"bool","If set, undoes the Chrome OS Alt-Backspace->DEL remap, so that alt-backspace indeed is alt-backspace."],"alt-is-meta":[!1,"bool","Set whether the alt key acts as a meta key or as a distinct alt key."],"alt-sends-what":["escape",["escape","8-bit","browser-key"],"Controls how the alt key is handled.\n\n  escape....... Send an ESC prefix.\n  8-bit........ Add 128 to the unshifted character as in xterm.\n  browser-key.. Wait for the keypress event and see what the browser \n                says.  (This won't work well on platforms where the \n                browser performs a default action for some alt sequences.)"],"audible-bell-sound":["x-resource:ding","url","Terminal bell sound.  Empty string for no audible bell."],"desktop-notification-bell":[!1,"bool",'If true, terminal bells in the background will create a Web Notification. http://www.w3.org/TR/notifications/\n\nDisplaying notifications requires permission from the user. When this option is set to true, hterm will attempt to ask the user for permission if necessary. Note browsers may not show this permission request if it did not originate from a user action.\n\nChrome extensions with the "notfications" permission have permission to display notifications.'],"background-color":["rgb(16, 16, 16)","color","The background color for text with no other color attributes."],"background-image":["","url","The background image."],"background-size":["","string","The background image size."],"background-position":["","string","The background image position"],"backspace-sends-backspace":[!1,"bool","If true, the backspace should send BS ('\b', aka ^H).  Otherwise the backspace key should send ''."],"cursor-blink":[!1,"bool","Whether or not to blink the cursor by default."],"cursor-blink-cycle":[[1e3,500],"value","The cursor blink rate in milliseconds.\n\nA two element array, the first of which is how long the cursor should be on, second is how long it should be off."],"cursor-color":["rgba(255, 0, 0, 0.5)","color","The color of the visible cursor."],"color-palette-overrides":[null,"value","Override colors in the default palette.\n\nThis can be specified as an array or an object.  If specified as an object it is assumed to be a sparse array, where each property is a numeric index into the color palette.\n\nValues can be specified as almost any css color value.  This includes #RGB, #RRGGBB, rgb(...), rgba(...), and any color names that are also part of the stock X11 rgb.txt file.\n\nYou can use 'null' to specify that the default value should be not be changed.  This is useful for skipping a small number of indicies when the value is specified as an array."],"copy-on-select":[!0,"bool","Automatically copy mouse selection to the clipboard."],"use-default-window-copy":[!1,"bool","Whether to use the default window copy behaviour"],"clear-selection-after-copy":[!0,"bool","Whether to clear the selection after copying."],"ctrl-plus-minus-zero-zoom":[!0,"bool","If true, Ctrl-Plus/Minus/Zero controls zoom. If false, Ctrl-Shift-Plus/Minus/Zero controls zoom, Ctrl-Minus sends ^_, Ctrl-Plus/Zero do nothing."],"ctrl-c-copy":[!1,"Ctrl+C copies if true, send ^C to host if false.  Ctrl+Shift+C sends ^C to host if true, copies if false."],"ctrl-v-paste":[!1,"bool","Ctrl+V pastes if true, send ^V to host if false.  Ctrl+Shift+V sends ^V to host if true, pastes if false."],"east-asian-ambiguous-as-two-column":[!1,"bool","Set whether East Asian Ambiguous characters have two column width."],"enable-8-bit-control":[!1,"bool","True to enable 8-bit control characters, false to ignore them."],"enable-bold":[null,"tristate","True if we should use bold weight font for text with the bold/bright attribute.  False to use the normal weight font.  Null to autodetect."],"enable-bold-as-bright":[!0,"bool","True if we should use bright colors (8-15 on a 16 color palette) for any text with the bold attribute.  False otherwise."],"enable-clipboard-notice":[!0,"bool","Show a message in the terminal when the host writes to the clipboard."],"enable-clipboard-write":[!0,"bool","Allow the host to write directly to the system clipboard."],"enable-dec12":[!1,"bool","Respect the host's attempt to change the cursor blink status using DEC Private Mode 12."],"font-family":['"DejaVu Sans Mono", "Everson Mono", FreeMono, "Menlo", "Terminal", monospace',"string","Default font family for the terminal text."],"font-size":[15,"int","The default font size in pixels."],"font-smoothing":["antialiased","string","CSS font-smoothing property."],"foreground-color":["rgb(240, 240, 240)","color","The foreground color for text with no other color attributes."],"home-keys-scroll":[!1,"bool","If true, home/end will control the terminal scrollbar and shift home/end will send the VT keycodes.  If false then home/end sends VT codes and shift home/end scrolls."],"max-string-sequence":[1e5,"int","Max length of a DCS, OSC, PM, or APS sequence before we give up and ignore the code."],"media-keys-are-fkeys":[!1,"bool","If true, convert media keys to their Fkey equivalent. If false, let the browser handle the keys."],"meta-sends-escape":[!0,"bool","Set whether the meta key sends a leading escape or not."],"mouse-paste-button":[null,"int","Mouse paste button, or null to autodetect.\n\nFor autodetect, we'll try to enable middle button paste for non-X11 platforms.  On X11 we move it to button 3."],"page-keys-scroll":[!1,"bool","If true, page up/down will control the terminal scrollbar and shift page up/down will send the VT keycodes.  If false then page up/down sends VT codes and shift page up/down scrolls."],"pass-alt-number":[!1,"bool","If true, Alt-1..9 will be handled by the browser.  If false, Alt-1..9 will be sent to the host."],"pass-ctrl-number":[!1,"bool","If true, Ctrl-1..9 will be handled by the browser.  If false, Ctrl-1..9 will be sent to the host."],"pass-meta-number":[!1,"bool","If true, Meta-1..9 will be handled by the browser.  If false, Meta-1..9 will be sent to the host."],"pass-meta-v":[!0,"bool","Set whether meta-V gets passed to host."],"receive-encoding":["utf-8",["utf-8","raw"],"Set the expected encoding for data received from the host."],"scroll-on-keystroke":[!0,"bool","If true, scroll to the bottom on any keystroke."],"scroll-on-output":[!1,"bool","If true, scroll to the bottom on terminal output."],"scrollbar-visible":[!0,"bool","The vertical scrollbar mode."],"send-encoding":["utf-8",["utf-8","raw"],"Set the encoding for data sent to host."],"shift-insert-paste":[!0,"bool","Shift + Insert pastes if true, sent to host if false."],"user-css":["","url","User stylesheet to include in the terminal document."]};a.configDefs=b,a["default"]=b}),define("hterm/i18n",["hterm/i18n/msg","hterm/i18n/utf8","hterm/i18n/wc","exports"],function(a,b,c,d){"use strict";var e=a["default"],f=b["default"],g=c["default"],h={msg:e,utf8:f,wc:g};d.i18n=h,d["default"]=h}),define("hterm/i18n/msg",["exports"],function(a){"use strict";var b={};a.msg=b,a["default"]=b,b.zoomWarning="ZOOM != 100%",b.notifyCopy="âœ‚",b.desktopNotificationTitle="â™ª %(title) â™ª"}),define("hterm/i18n/utf8",["exports"],function(a){"use strict";var b={};a.utf8=b,a["default"]=b,b.Decoder=function(){this.bytesLeft=0,this.codePoint=0,this.lowerBound=0},b.Decoder.prototype.decode=function(a){for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);if(0===this.bytesLeft)127>=d?b+=a.charAt(c):d>=192&&223>=d?(this.codePoint=d-192,this.bytesLeft=1,this.lowerBound=128):d>=224&&239>=d?(this.codePoint=d-224,this.bytesLeft=2,this.lowerBound=2048):d>=240&&247>=d?(this.codePoint=d-240,this.bytesLeft=3,this.lowerBound=65536):d>=248&&251>=d?(this.codePoint=d-248,this.bytesLeft=4,this.lowerBound=2097152):d>=252&&253>=d?(this.codePoint=d-252,this.bytesLeft=5,this.lowerBound=67108864):b+="ï¿½";else if(d>=128&&191>=d){if(this.bytesLeft--,this.codePoint=(this.codePoint<<6)+(d-128),0===this.bytesLeft){var e=this.codePoint;e<this.lowerBound||e>=55296&&57343>=e||e>1114111?b+="ï¿½":65536>e?b+=String.fromCharCode(e):(e-=65536,b+=String.fromCharCode(55296+(e>>>10&1023),56320+(1023&e)))}}else b+="ï¿½",this.bytesLeft=0,c--}return b},b.decode=function(a){return(new b.Decoder).decode(a)},b.encode=function(a){for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);if(d>=56320&&57343>=d)d=65533;else if(d>=55296&&56319>=d)if(c+1<a.length){var e=a.charCodeAt(c+1);e>=56320&&57343>=e?(d=65536+((1023&d)<<10)+(1023&e),c++):d=65533}else d=65533;var f;if(127>=d)b+=a.charAt(c);else for(2047>=d?(b+=String.fromCharCode(192|d>>>6),f=1):65535>=d?(b+=String.fromCharCode(224|d>>>12),f=2):(b+=String.fromCharCode(240|d>>>18),f=3);f>0;)f--,b+=String.fromCharCode(128|d>>>6*f&63)}return b}}),define("hterm/i18n/wc",["exports"],function(a){"use strict";var b={};a.wc=b,a["default"]=b,b.nulWidth=0,b.controlWidth=0,b.regardCjkAmbiguous=!1,b.cjkAmbiguousWidth=2,b.combining=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],b.ambiguous=[[161,161],[164,164],[167,168],[170,170],[174,174],[176,180],[182,186],[188,191],[198,198],[208,208],[215,216],[222,225],[230,230],[232,234],[236,237],[240,240],[242,243],[247,250],[252,252],[254,254],[257,257],[273,273],[275,275],[283,283],[294,295],[299,299],[305,307],[312,312],[319,322],[324,324],[328,331],[333,333],[338,339],[358,359],[363,363],[462,462],[464,464],[466,466],[468,468],[470,470],[472,472],[474,474],[476,476],[593,593],[609,609],[708,708],[711,711],[713,715],[717,717],[720,720],[728,731],[733,733],[735,735],[913,929],[931,937],[945,961],[963,969],[1025,1025],[1040,1103],[1105,1105],[8208,8208],[8211,8214],[8216,8217],[8220,8221],[8224,8226],[8228,8231],[8240,8240],[8242,8243],[8245,8245],[8251,8251],[8254,8254],[8308,8308],[8319,8319],[8321,8324],[8364,8364],[8451,8451],[8453,8453],[8457,8457],[8467,8467],[8470,8470],[8481,8482],[8486,8486],[8491,8491],[8531,8532],[8539,8542],[8544,8555],[8560,8569],[8592,8601],[8632,8633],[8658,8658],[8660,8660],[8679,8679],[8704,8704],[8706,8707],[8711,8712],[8715,8715],[8719,8719],[8721,8721],[8725,8725],[8730,8730],[8733,8736],[8739,8739],[8741,8741],[8743,8748],[8750,8750],[8756,8759],[8764,8765],[8776,8776],[8780,8780],[8786,8786],[8800,8801],[8804,8807],[8810,8811],[8814,8815],[8834,8835],[8838,8839],[8853,8853],[8857,8857],[8869,8869],[8895,8895],[8978,8978],[9312,9449],[9451,9547],[9552,9587],[9600,9615],[9618,9621],[9632,9633],[9635,9641],[9650,9651],[9654,9655],[9660,9661],[9664,9665],[9670,9672],[9675,9675],[9678,9681],[9698,9701],[9711,9711],[9733,9734],[9737,9737],[9742,9743],[9748,9749],[9756,9756],[9758,9758],[9792,9792],[9794,9794],[9824,9825],[9827,9829],[9831,9834],[9836,9837],[9839,9839],[10045,10045],[10102,10111],[57344,63743],[65533,65533],[983040,1048573],[1048576,1114109]],b.isSpace=function(a){var c,d=0,e=b.combining.length-1;if(a<b.combining[0][0]||a>b.combining[e][1])return!1;for(;e>=d;)if(c=Math.floor((d+e)/2),a>b.combining[c][1])d=c+1;else{if(!(a<b.combining[c][0]))return!0;e=c-1}return!1},b.isCjkAmbiguous=function(a){var c,d=0,e=b.ambiguous.length-1;if(a<b.ambiguous[0][0]||a>b.ambiguous[e][1])return!1;for(;e>=d;)if(c=Math.floor((d+e)/2),a>b.ambiguous[c][1])d=c+1;else{if(!(a<b.ambiguous[c][0]))return!0;e=c-1}return!1},b.charWidth=function(a){return b.regardCjkAmbiguous?b.charWidthRegardAmbiguous(a):b.charWidthDisregardAmbiguous(a)},b.charWidthDisregardAmbiguous=function(a){return 0===a?b.nulWidth:32>a||a>=127&&160>a?b.controlWidth:127>a?1:b.isSpace(a)?0:1+(a>=4352&&(4447>=a||9001==a||9002==a||a>=11904&&42191>=a&&12351!=a||a>=44032&&55203>=a||a>=63744&&64255>=a||a>=65040&&65049>=a||a>=65072&&65135>=a||a>=65280&&65376>=a||a>=65504&&65510>=a||a>=131072&&196605>=a||a>=196608&&262141>=a))},b.charWidthRegardAmbiguous=function(a){return b.isCjkAmbiguous(a)?b.cjkAmbiguousWidth:b.charWidthDisregardAmbiguous(a)},b.strWidth=function(a){for(var c,d=0,e=0;e<a.length;e++){if(c=b.charWidth(a.charCodeAt(e)),0>c)return-1;d+=c}return d},b.substr=function(a,c,d){var e,f,g;for(e=0,g=0;e<a.length&&(g+=b.charWidth(a.charCodeAt(e)),!(g>c));e++);if(void 0!==d){for(f=e,g=0;f<a.length&&d>g;g+=b.charWidth(a.charCodeAt(f)),f++);return g>d&&f--,a.substring(e,f)}return a.substr(e)},b.substring=function(a,c,d){return b.substr(a,c,d-c)}}),define("hterm/key_map",["hterm/struct/key_actions","exports"],function(a,b){"use strict";var c=a["default"],d=function(a){this.keyboard=a,this.keyDefs={},this.reset()};b.KeyMap=d,b["default"]=d,d.prototype.addKeyDef=function(a,b){a in this.keyDefs&&console.warn("Duplicate keyCode: "+a),this.keyDefs[a]=b},d.prototype.addKeyDefs=function(){for(var a=0;a<arguments.length;a++)this.addKeyDef(arguments[a][0],{keyCap:arguments[a][1],normal:arguments[a][2],control:arguments[a][3],alt:arguments[a][4],meta:arguments[a][5]})},d.prototype.reset=function(){function a(a,b,c){return"function"==typeof a?a.apply(k,[b,c]):a}function b(b,c){return function(d,e){var f=d.shiftKey||d.ctrlKey||d.altKey||d.metaKey||!k.keyboard.applicationCursor?b:c;return a(f,d,e)}}function d(b,c){return function(d,e){var f=k.keyboard.backspaceSendsBackspace?c:b;return a(f,d,e)}}function e(b,c){return function(d,e){var f=d.shiftKey?c:b;return delete d.shiftKey,d.shiftKey=!1,a(f,d,e)}}function f(b,c){return function(d,e){var f=d.altKey?c:b;return a(f,d,e)}}function g(b,c){return function(d,e){var f=d.shiftKey||d.ctrlKey||d.altKey||d.metaKey?c:b;return a(f,d,e)}}function h(a){return String.fromCharCode(a.charCodeAt(0)-64)}function i(a){return function(b,c){return this[a](b,c)}}function j(b){return function(d,e){return k.keyboard.mediaKeysAreFKeys?a(b,d,e):c.PASS}}this.keyDefs={};var k=this,l="",m="[",n="O",o=c.CANCEL,p=c.DEFAULT,q=c.PASS,r=c.STRIP;this.addKeyDefs([0,"[UNKNOWN]",q,q,q,q],[27,"[ESC]",l,p,p,p],[112,"[F1]",g(n+"P",m+"P"),p,m+"23~",p],[113,"[F2]",g(n+"Q",m+"Q"),p,m+"24~",p],[114,"[F3]",g(n+"R",m+"R"),p,m+"25~",p],[115,"[F4]",g(n+"S",m+"S"),p,m+"26~",p],[116,"[F5]",m+"15~",p,m+"28~",p],[117,"[F6]",m+"17~",p,m+"29~",p],[118,"[F7]",m+"18~",p,m+"31~",p],[119,"[F8]",m+"19~",p,m+"32~",p],[120,"[F9]",m+"20~",p,m+"33~",p],[121,"[F10]",m+"21~",p,m+"34~",p],[122,"[F11]",m+"23~",p,m+"42~",p],[123,"[F12]",m+"24~",p,m+"43~",p],[192,"`~",p,e(h("@"),h("^")),p,q],[49,"1!",p,i("onCtrlNum_"),i("onAltNum_"),i("onMetaNum_")],[50,"2@",p,i("onCtrlNum_"),i("onAltNum_"),i("onMetaNum_")],[51,"3#",p,i("onCtrlNum_"),i("onAltNum_"),i("onMetaNum_")],[52,"4$",p,i("onCtrlNum_"),i("onAltNum_"),i("onMetaNum_")],[53,"5%",p,i("onCtrlNum_"),i("onAltNum_"),i("onMetaNum_")],[54,"6^",p,i("onCtrlNum_"),i("onAltNum_"),i("onMetaNum_")],[55,"7&",p,i("onCtrlNum_"),i("onAltNum_"),i("onMetaNum_")],[56,"8*",p,i("onCtrlNum_"),i("onAltNum_"),i("onMetaNum_")],[57,"9(",p,i("onCtrlNum_"),i("onAltNum_"),i("onMetaNum_")],[48,"0)",p,i("onPlusMinusZero_"),i("onAltNum_"),i("onPlusMinusZero_")],[189,"-_",p,i("onPlusMinusZero_"),p,i("onPlusMinusZero_")],[187,"=+",p,i("onPlusMinusZero_"),p,i("onPlusMinusZero_")],[173,"-_",p,i("onPlusMinusZero_"),p,i("onPlusMinusZero_")],[61,"=+",p,i("onPlusMinusZero_"),p,i("onPlusMinusZero_")],[171,"+*",p,i("onPlusMinusZero_"),p,i("onPlusMinusZero_")],[8,"[BKSP]",d("","\b"),d("\b",""),p,p],[9,"[TAB]",e("	",m+"Z"),r,q,p],[81,"qQ",p,h("Q"),p,p],[87,"wW",p,h("W"),p,p],[69,"eE",p,h("E"),p,p],[82,"rR",p,h("R"),p,p],[84,"tT",p,h("T"),p,p],[89,"yY",p,h("Y"),p,p],[85,"uU",p,h("U"),p,p],[73,"iI",p,h("I"),p,p],[79,"oO",p,h("O"),p,p],[80,"pP",p,h("P"),p,p],[219,"[{",p,h("["),p,p],[221,"]}",p,h("]"),p,p],[220,"\\|",p,h("\\"),p,p],[20,"[CAPS]",q,q,q,p],[65,"aA",p,h("A"),p,p],[83,"sS",p,h("S"),p,p],[68,"dD",p,h("D"),p,p],[70,"fF",p,h("F"),p,p],[71,"gG",p,h("G"),p,p],[72,"hH",p,h("H"),p,p],[74,"jJ",p,e(h("J"),q),p,p],[75,"kK",p,e(h("K"),i("onClear_")),p,p],[76,"lL",p,e(h("L"),q),p,p],[186,";:",p,r,p,p],[222,"'\"",p,r,p,p],[13,"[ENTER]","\r",o,o,p],[16,"[SHIFT]",q,q,q,p],[90,"zZ",p,h("Z"),p,p],[88,"xX",p,h("X"),p,p],[67,"cC",p,i("onCtrlC_"),p,i("onMetaC_")],[86,"vV",p,i("onCtrlV_"),p,i("onMetaV_")],[66,"bB",p,e(h("B"),q),p,e(p,q)],[78,"nN",p,i("onCtrlN_"),p,i("onMetaN_")],[77,"mM",p,h("M"),p,p],[188,",<",p,f(r,q),p,p],[190,".>",p,f(r,q),p,p],[191,"/?",p,e(h("_"),h("?")),p,p],[17,"[CTRL]",q,q,q,q],[18,"[ALT]",q,q,q,q],[91,"[LAPL]",q,q,q,q],[32," ",p,h("@"),p,p],[92,"[RAPL]",q,q,q,q],[42,"[PRTSCR]",q,q,q,q],[145,"[SCRLK]",q,q,q,q],[19,"[BREAK]",q,q,q,q],[45,"[INSERT]",i("onKeyInsert_"),p,p,p],[36,"[HOME]",i("onKeyHome_"),p,p,p],[33,"[PGUP]",i("onKeyPageUp_"),p,p,p],[46,"[DEL]",i("onKeyDel_"),p,p,p],[35,"[END]",i("onKeyEnd_"),p,p,p],[34,"[PGDOWN]",i("onKeyPageDown_"),p,p,p],[38,"[UP]",b(m+"A",n+"A"),p,p,p],[40,"[DOWN]",b(m+"B",n+"B"),p,p,p],[39,"[RIGHT]",b(m+"C",n+"C"),p,p,p],[37,"[LEFT]",b(m+"D",n+"D"),p,p,p],[144,"[NUMLOCK]",q,q,q,q],[96,"[KP0]",p,p,p,p],[97,"[KP1]",p,p,p,p],[98,"[KP2]",p,p,p,p],[99,"[KP3]",p,p,p,p],[100,"[KP4]",p,p,p,p],[101,"[KP5]",p,p,p,p],[102,"[KP6]",p,p,p,p],[103,"[KP7]",p,p,p,p],[104,"[KP8]",p,p,p,p],[105,"[KP9]",p,p,p,p],[107,"[KP+]",p,p,p,p],[109,"[KP-]",p,p,p,p],[106,"[KP*]",p,p,p,p],[111,"[KP/]",p,p,p,p],[110,"[KP.]",p,p,p,p],[166,"[BACK]",j(g(n+"P",m+"P")),p,m+"23~",p],[167,"[FWD]",j(g(n+"Q",m+"Q")),p,m+"24~",p],[168,"[RELOAD]",j(g(n+"R",m+"R")),p,m+"25~",p],[183,"[FSCR]",j(g(n+"S",m+"S")),p,m+"26~",p],[182,"[WINS]",j(m+"15~"),p,m+"28~",p],[216,"[BRIT-]",j(m+"17~"),p,m+"29~",p],[217,"[BRIT+]",j(m+"18~"),p,m+"31~",p])},d.prototype.onKeyInsert_=function(a){return this.keyboard.shiftInsertPaste&&a.shiftKey?c.PASS:"[2~"},d.prototype.onKeyHome_=function(a){return!this.keyboard.homeKeysScroll^a.shiftKey?a.altey||a.ctrlKey||a.shiftKey||!this.keyboard.applicationCursor?"[H":"OH":(this.keyboard.terminal.scrollHome(),c.CANCEL)},d.prototype.onKeyEnd_=function(a){return!this.keyboard.homeKeysScroll^a.shiftKey?a.altKey||a.ctrlKey||a.shiftKey||!this.keyboard.applicationCursor?"[F":"OF":(this.keyboard.terminal.scrollEnd(),c.CANCEL)},d.prototype.onKeyPageUp_=function(a){return!this.keyboard.pageKeysScroll^a.shiftKey?"[5~":(this.keyboard.terminal.scrollPageUp(),c.CANCEL)},d.prototype.onKeyDel_=function(a){return this.keyboard.altBackspaceIsMetaBackspace&&this.keyboard.altIsPressed&&!a.altKey?"":"[3~"},d.prototype.onKeyPageDown_=function(a){return!this.keyboard.pageKeysScroll^a.shiftKey?"[6~":(this.keyboard.terminal.scrollPageDown(),c.CANCEL)},d.prototype.onClear_=function(){return this.keyboard.terminal.wipeContents(),c.CANCEL},d.prototype.onCtrlNum_=function(a,b){function d(a){return String.fromCharCode(a.charCodeAt(0)-64)}if(this.keyboard.terminal.passCtrlNumber&&!a.shiftKey)return c.PASS;switch(b.keyCap.substr(0,1)){case"1":return"1";case"2":return d("@");case"3":return d("[");case"4":return d("\\");case"5":return d("]");case"6":return d("^");case"7":return d("_");case"8":return"";case"9":return"9"}},d.prototype.onAltNum_=function(a){return this.keyboard.terminal.passAltNumber&&!a.shiftKey?c.PASS:c.DEFAULT},d.prototype.onMetaNum_=function(a){return this.keyboard.terminal.passMetaNumber&&!a.shiftKey?c.PASS:c.DEFAULT},d.prototype.onCtrlC_=function(a){var b=this.keyboard.terminal.getDocument().getSelection();if(!b.isCollapsed){if(this.keyboard.ctrlCCopy&&!a.shiftKey)return this.keyboard.terminal.clearSelectionAfterCopy&&setTimeout(b.collapseToEnd.bind(b),50),c.PASS;if(!this.keyboard.ctrlCCopy&&a.shiftKey)return this.keyboard.terminal.clearSelectionAfterCopy&&setTimeout(b.collapseToEnd.bind(b),50),this.keyboard.terminal.copySelectionToClipboard(),c.CANCEL}return""},d.prototype.onCtrlN_=function(a){return a.shiftKey?(window.open(document.location.href,"","chrome=no,close=yes,resize=yes,scrollbars=yes,minimizable=yes,width="+window.innerWidth+",height="+window.innerHeight),c.CANCEL):""},d.prototype.onCtrlV_=function(a){return!a.shiftKey&&this.keyboard.ctrlVPaste||a.shiftKey&&!this.keyboard.ctrlVPaste?c.PASS:""},d.prototype.onMetaN_=function(a){return a.shiftKey?(window.open(document.location.href,"","chrome=no,close=yes,resize=yes,scrollbars=yes,minimizable=yes,width="+window.outerWidth+",height="+window.outerHeight),c.CANCEL):c.DEFAULT},d.prototype.onMetaC_=function(a,b){var d=this.keyboard.terminal.getDocument();return a.shiftKey||d.getSelection().isCollapsed?b.keyCap.substr(a.shiftKey?1:0,1):(this.keyboard.terminal.clearSelectionAfterCopy&&setTimeout(function(){d.getSelection().collapseToEnd()},50),c.PASS)},d.prototype.onMetaV_=function(a){return a.shiftKey?c.PASS:this.keyboard.passMetaV?c.PASS:c.DEFAULT},d.prototype.onPlusMinusZero_=function(a,b){if(!(this.keyboard.ctrlPlusMinusZeroZoom^a.shiftKey))return"-_"==b.keyCap?"":c.CANCEL;if(1!=this.keyboard.terminal.getZoomFactor())return c.PASS;var d=b.keyCap.substr(0,1);if("0"==d)this.keyboard.terminal.setFontSize(0);else{var e=this.keyboard.terminal.getFontSize();"-"==d?e-=1:e+=1,this.keyboard.terminal.setFontSize(e)}return c.CANCEL}}),define("hterm/keyboard",["hterm/struct/key_actions","hterm/key_map","exports"],function(a,b,c){"use strict";var d=a["default"],e=b["default"],f=function(a){this.terminal=a,this.keyboardElement_=null,this.handlers_=[["blur",this.onBlur_.bind(this)],["keydown",this.onKeyDown_.bind(this)],["keypress",this.onKeyPress_.bind(this)],["keyup",this.onKeyUp_.bind(this)],["textInput",this.onTextInput_.bind(this)]],this.keyMap=new e(this),this.shiftInsertPaste=!0,this.homeKeysScroll=!1,this.pageKeysScroll=!1,this.ctrlPlusMinusZeroZoom=!0,this.ctrlCCopy=!1,this.ctrlVPaste=!1,this.applicationKeypad=!1,this.applicationCursor=!1,this.backspaceSendsBackspace=!1,this.characterEncoding="utf-8",this.metaSendsEscape=!0,this.passMetaV=!0,this.altSendsWhat="escape",this.altIsMeta=!1,this.altBackspaceIsMetaBackspace=!1,this.altIsPressed=!1,this.mediaKeysAreFKeys=!1};c.Keyboard=f,c["default"]=f,f.prototype.encode=function(a){return"utf-8"==this.characterEncoding?this.terminal.vt.encodeUTF8(a):a},f.prototype.installKeyboard=function(a){if(a!=this.keyboardElement_){a&&this.keyboardElement_&&this.installKeyboard(null);for(var b=0;b<this.handlers_.length;b++){var c=this.handlers_[b];a?a.addEventListener(c[0],c[1]):this.keyboardElement_.removeEventListener(c[0],c[1])}this.keyboardElement_=a}},f.prototype.uninstallKeyboard=function(){this.installKeyboard(null)},f.prototype.onTextInput_=function(a){a.data&&a.data.split("").forEach(this.terminal.onVTKeystroke.bind(this.terminal))},f.prototype.onKeyPress_=function(a){var b,c=String.fromCharCode(a.which),d=c.toLowerCase();if(!a.ctrlKey&&!a.metaKey||"c"!=d&&"v"!=d){var e;a.altKey&&"browser-key"==this.altSendsWhat&&0===a.charCode?(e=String.fromCharCode(a.keyCode),a.shiftKey||(e=e.toLowerCase()),b=e.charCodeAt(0)+128):a.charCode>=32&&(e=a.charCode),e&&this.terminal.onVTKeystroke(String.fromCharCode(e)),a.preventDefault(),a.stopPropagation()}},f.prototype.onBlur_=function(){this.altIsPressed=!1},f.prototype.onKeyUp_=function(a){18==a.keyCode&&(this.altIsPressed=!1)},f.prototype.onKeyDown_=function(a){function b(d){f=d;var e=c[d];return"function"==typeof e&&(e=e.apply(g.keyMap,[a,c])),e===i&&"normal"!=d&&(e=b("normal")),e}18==a.keyCode&&(this.altIsPressed=!0);var c=this.keyMap.keyDefs[a.keyCode];if(!c)return void console.warn("No definition for keyCode: "+a.keyCode);var e,f=null,g=this,h=d.CANCEL,i=d.DEFAULT,j=d.PASS,k=d.STRIP,l=a.ctrlKey,m=this.altIsMeta?!1:a.altKey,n=this.altIsMeta?a.altKey||a.metaKey:a.metaKey;e=b(l?"control":m?"alt":n?"meta":"normal");var o=a.shiftKey;if(m&&"browser-key"==this.altSendsWhat&&e==i&&(e=j),e!==j&&(e!==i||l||m||n)&&(e===k&&(m=l=!1,e=c.normal,"function"==typeof e&&(e=e.apply(this.keyMap,[a,c])),e==i&&2==c.keyCap.length&&(e=c.keyCap.substr(a.shiftKey?1:0,1))),a.preventDefault(),a.stopPropagation(),e!==h)){if(e!==i&&"string"!=typeof e)return void console.warn("Invalid action: "+JSON.stringify(e));if("control"==f?l=!1:"alt"==f?m=!1:"meta"==f&&(n=!1),"["==e.substr(0,2)&&(m||l||o)){var p;!o||m||l?!m||o||l?o&&m&&!l?p=";4":!l||o||m?o&&l&&!m?p=";6":m&&l&&!o?p=";7":o&&m&&l&&(p=";8"):p=";5":p=";3":p=";2",e=3==e.length?"[1"+p+e.substr(2,1):e.substr(0,e.length-1)+p+e.substr(e.length-1)}else{var q;if(e===i&&(e=c.keyCap.substr(a.shiftKey?1:0,1),l)){var r=c.keyCap.substr(0,1);q=r.charCodeAt(0),q>=64&&95>=q&&(e=String.fromCharCode(q-64))}m&&"8-bit"==this.altSendsWhat&&1==e.length&&(q=e.charCodeAt(0)+128,e=String.fromCharCode(q)),(m&&"escape"==this.altSendsWhat||n&&this.metaSendsEscape)&&(e=""+e)}this.terminal.onVTKeystroke(e)}}}),define("hterm/public",["hterm/config","hterm/terminal","exports"],function(a,b,c){"use strict";var d=a["default"],e=b["default"],f={Config:d,Terminal:e};c.hterm=f,c["default"]=f}),define("hterm/resource/ding",["exports"],function(a){"use strict";var b={};a.ding=b,a["default"]=b,b.getDataUrl=function(){return"data:audio/ogg;base64,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"
}}),define("hterm/screen",["hterm/struct","hterm/util","hterm/i18n","hterm/text_attributes","exports"],function(a,b,c,d,e){"use strict";var f=a["default"],g=b["default"],h=c["default"],i=d["default"],j=function(a){this.rowsArray=[],this.columnCount_=a||80,this.textAttributes=new i(window.document),this.cursorPosition=new f.RowCol(0,0),this.cursorRowNode_=null,this.cursorNode_=null,this.cursorOffset_=null};e.Screen=j,e["default"]=j,j.prototype.getSize=function(){return new f.Size(this.columnCount_,this.rowsArray.length)},j.prototype.getHeight=function(){return this.rowsArray.length},j.prototype.getWidth=function(){return this.columnCount_},j.prototype.setColumnCount=function(a){this.columnCount_=a,this.cursorPosition.column>=a&&this.setCursorPosition(this.cursorPosition.row,a-1)},j.prototype.shiftRow=function(){return this.shiftRows(1)[0]},j.prototype.shiftRows=function(a){return this.rowsArray.splice(0,a)},j.prototype.unshiftRow=function(a){this.rowsArray.splice(0,0,a)},j.prototype.unshiftRows=function(a){this.rowsArray.unshift.apply(this.rowsArray,a)},j.prototype.popRow=function(){return this.popRows(1)[0]},j.prototype.popRows=function(a){return this.rowsArray.splice(this.rowsArray.length-a,a)},j.prototype.pushRow=function(a){this.rowsArray.push(a)},j.prototype.pushRows=function(a){a.push.apply(this.rowsArray,a)},j.prototype.insertRow=function(a,b){this.rowsArray.splice(a,0,b)},j.prototype.insertRows=function(a,b){for(var c=0;c<b.length;c++)this.rowsArray.splice(a+c,0,b[c])},j.prototype.removeRow=function(a){return this.rowsArray.splice(a,1)[0]},j.prototype.removeRows=function(a,b){return this.rowsArray.splice(a,b)},j.prototype.invalidateCursorPosition=function(){this.cursorPosition.move(0,0),this.cursorRowNode_=null,this.cursorNode_=null,this.cursorOffset_=null},j.prototype.clearCursorRow=function(){this.cursorRowNode_.innerHTML="",this.cursorRowNode_.removeAttribute("line-overflow"),this.cursorOffset_=0,this.cursorPosition.column=0,this.cursorPosition.overflow=!1;var a;a=this.textAttributes.isDefault()?"":g.string.getWhitespace(this.columnCount_);var b=this.textAttributes.inverse;this.textAttributes.inverse=!1,this.textAttributes.syncColors();var c=this.textAttributes.createContainer(a);this.cursorRowNode_.appendChild(c),this.cursorNode_=c,this.textAttributes.inverse=b,this.textAttributes.syncColors()},j.prototype.commitLineOverflow=function(){this.cursorRowNode_.setAttribute("line-overflow",!0)},j.prototype.setCursorPosition=function(a,b){if(!this.rowsArray.length)return void console.warn("Attempt to set cursor position on empty screen.");a>=this.rowsArray.length?(console.error("Row out of bounds: "+a),a=this.rowsArray.length-1):0>a&&(console.error("Row out of bounds: "+a),a=0),b>=this.columnCount_?(console.error("Column out of bounds: "+b),b=this.columnCount_-1):0>b&&(console.error("Column out of bounds: "+b),b=0),this.cursorPosition.overflow=!1;var c=this.rowsArray[a],d=c.firstChild;d||(d=c.ownerDocument.createTextNode(""),c.appendChild(d));var e=0;for(c==this.cursorRowNode_?b>=this.cursorPosition.column-this.cursorOffset_&&(d=this.cursorNode_,e=this.cursorPosition.column-this.cursorOffset_):this.cursorRowNode_=c,this.cursorPosition.move(a,b);d;){var f=b-e,g=i.nodeWidth(d);if(!d.nextSibling||g>f)return this.cursorNode_=d,void(this.cursorOffset_=f);e+=g,d=d.nextSibling}},j.prototype.syncSelectionCaret=function(a){try{a.collapse(this.cursorNode_,this.cursorOffset_)}catch(b){}},j.prototype.splitNode_=function(a,b){var c=a.cloneNode(!1),d=a.textContent;a.textContent=i.nodeSubstr(a,0,b),c.textContent=h.wc.substr(d,b),c.textContent&&a.parentNode.insertBefore(c,a.nextSibling),a.textContent||a.parentNode.removeChild(a)},j.prototype.maybeClipCurrentRow=function(){var a=i.nodeWidth(this.cursorRowNode_);if(a<=this.columnCount_)return void(this.cursorPosition.column>=this.columnCount_&&(this.setCursorPosition(this.cursorPosition.row,this.columnCount_-1),this.cursorPosition.overflow=!0));var b=this.cursorPosition.column;this.setCursorPosition(this.cursorPosition.row,this.columnCount_-1),a=i.nodeWidth(this.cursorNode_),this.cursorOffset_<a-1&&(this.cursorNode_.textContent=i.nodeSubstr(this.cursorNode_,0,this.cursorOffset_+1));for(var c=this.cursorRowNode_,d=this.cursorNode_.nextSibling;d;)c.removeChild(d),d=this.cursorNode_.nextSibling;b<this.columnCount_?this.setCursorPosition(this.cursorPosition.row,b):this.cursorPosition.overflow=!0},j.prototype.insertString=function(a){var b=this.cursorNode_,c=b.textContent;this.cursorRowNode_.removeAttribute("line-overflow");var d=h.wc.strWidth(a);this.cursorPosition.column+=d;var e=this.cursorOffset_,f=i.nodeWidth(b)-e;if(0>f){var j=g.string.getWhitespace(-f);if(this.textAttributes.underline||this.textAttributes.background||this.textAttributes.wcNode||null!=this.textAttributes.tileData)if(3!=b.nodeType&&(b.wcNode||b.tileNode||b.style.textDecoration||b.style.backgroundColor)){var k=b.ownerDocument.createTextNode(j);this.cursorRowNode_.insertBefore(k,b.nextSibling),this.cursorNode_=b=k,this.cursorOffset_=e=-f,c=j}else b.textContent=c+=j;else a=j+a;f=0}if(this.textAttributes.matchesContainer(b))return b.textContent=0===f?c+a:0===e?a+c:i.nodeSubstr(b,0,e)+a+i.nodeSubstr(b,e),void(this.cursorOffset_+=d);var l;if(0===e){var m=b.previousSibling;return m&&this.textAttributes.matchesContainer(m)?(m.textContent+=a,this.cursorNode_=m,void(this.cursorOffset_=h.wc.strWidth(m.textContent))):(l=this.textAttributes.createContainer(a),this.cursorRowNode_.insertBefore(l,b),this.cursorNode_=l,void(this.cursorOffset_=d))}if(0===f){var n=b.nextSibling;return n&&this.textAttributes.matchesContainer(n)?(n.textContent=a+n.textContent,this.cursorNode_=n,void(this.cursorOffset_=h.wc.strWidth(a))):(l=this.textAttributes.createContainer(a),this.cursorRowNode_.insertBefore(l,n),this.cursorNode_=l,void(this.cursorOffset_=i.nodeWidth(l)))}this.splitNode_(b,e),l=this.textAttributes.createContainer(a),this.cursorRowNode_.insertBefore(l,b.nextSibling),this.cursorNode_=l,this.cursorOffset_=d},j.prototype.overwriteString=function(a){var b=this.columnCount_-this.cursorPosition.column;if(!b)return[a];var c=h.wc.strWidth(a);return this.textAttributes.matchesContainer(this.cursorNode_)&&this.cursorNode_.textContent.substr(this.cursorOffset_)==a?(this.cursorOffset_+=c,void(this.cursorPosition.column+=c)):(this.deleteChars(Math.min(c,b)),void this.insertString(a))},j.prototype.deleteChars=function(a){var b=this.cursorNode_,c=this.cursorOffset_,d=this.cursorPosition.column;if(a=Math.min(a,this.columnCount_-d),!a)return 0;for(var e,f,g=a;b&&a;){if(e=i.nodeWidth(b),b.textContent=i.nodeSubstr(b,0,c)+i.nodeSubstr(b,c+a),f=i.nodeWidth(b),a-=e-f,e>c&&f&&e==f){var h=this.textAttributes.createContainer(" ");b.parentNode.insertBefore(h,b.nextSibling),b.textContent="",f=0,a-=1}var j=b.nextSibling;0===f&&b!=this.cursorNode_&&b.parentNode.removeChild(b),b=j,c=0}if(3!=this.cursorNode_.nodeType&&!this.cursorNode_.textContent){var k=this.cursorNode_;if(k.previousSibling)this.cursorNode_=k.previousSibling,this.cursorOffset_=i.nodeWidth(k.previousSibling);else if(k.nextSibling)this.cursorNode_=k.nextSibling,this.cursorOffset_=0;else{var l=this.cursorRowNode_.ownerDocument.createTextNode("");this.cursorRowNode_.appendChild(l),this.cursorNode_=l,this.cursorOffset_=0}this.cursorRowNode_.removeChild(k)}return g},j.prototype.getLineStartRow_=function(a){for(;a.previousSibling&&a.previousSibling.hasAttribute("line-overflow");)a=a.previousSibling;return a},j.prototype.getLineText_=function(a){for(var b="";a&&(b+=a.textContent,a.hasAttribute("line-overflow"));)a=a.nextSibling;return b},j.prototype.getXRowAncestor_=function(a){for(;a&&"X-ROW"!==a.nodeName;)a=a.parentNode;return a},j.prototype.getPositionWithOverflow_=function(a,b,c){if(!b)return-1;var d=this.getXRowAncestor_(b);if(!d)return-1;for(var e=0;d!=a;){if(e+=i.nodeWidth(a),!a.hasAttribute("line-overflow")||!a.nextSibling)return-1;a=a.nextSibling}return e+this.getPositionWithinRow_(a,b,c)},j.prototype.getPositionWithinRow_=function(a,b,c){if(b.parentNode!=a)return this.getPositionWithinRow_(b.parentNode,b,c)+this.getPositionWithinRow_(a,b.parentNode,0);for(var d=0,e=0;e<a.childNodes.length;e++){var f=a.childNodes[e];if(f==b)return d+c;d+=i.nodeWidth(f)}return-1},j.prototype.getNodeAndOffsetWithOverflow_=function(a,b){for(;a&&b>i.nodeWidth(a);){if(!a.hasAttribute("line-overflow")||!a.nextSibling)return-1;b-=i.nodeWidth(a),a=a.nextSibling}return this.getNodeAndOffsetWithinRow_(a,b)},j.prototype.getNodeAndOffsetWithinRow_=function(a,b){for(var c=0;c<a.childNodes.length;c++){var d=a.childNodes[c],e=i.nodeWidth(d);if(e>=b)return"SPAN"===d.nodeName?this.getNodeAndOffsetWithinRow_(d,b):[d,b];b-=e}return null},j.prototype.setRange_=function(a,b,c,d){var e=this.getNodeAndOffsetWithOverflow_(a,b);if(null!=e){var f=this.getNodeAndOffsetWithOverflow_(a,c);null!=f&&(d.setStart(e[0],e[1]),d.setEnd(f[0],f[1]))}},j.prototype.expandSelection=function(a){if(a){var b=a.getRangeAt(0);if(b&&!b.toString().match(/\s/)){var c=this.getLineStartRow_(this.getXRowAncestor_(b.startContainer));if(c){var d=this.getPositionWithOverflow_(c,b.startContainer,b.startOffset);if(-1!=d){var e=this.getPositionWithOverflow_(c,b.endContainer,b.endOffset);if(-1!=e){var f="[^\\s\\[\\](){}<>\"'\\^!@#$%&*,;:`]",g="[^\\s\\[\\](){}<>\"'\\^!@#$%&*,;:~.`]",i="[^\\s\\[\\](){}<>\"'\\^]*",j=this.getLineText_(c),k=h.wc.substring(j,0,e),l=new RegExp(f+i+"$"),m=k.search(l);if(!(-1==m||m>d)){var n=h.wc.substring(j,d,h.wc.strWidth(j)),o=new RegExp("^"+i+g),p=n.match(o);if(p){var q=d+h.wc.strWidth(p[0]);-1==q||e>q||(this.setRange_(c,m,q,b),a.addRange(b))}}}}}}}}}),define("hterm/scrollport",["hterm/struct","hterm/util","exports"],function(a,b,c){"use strict";var d=a["default"],e=b["default"],f=function(a){e.PubSub.addBehavior(this),this.rowProvider_=a,this.characterSize=new d.Size(10,10),this.ruler_=null,this.selection=new f.Selection(this),this.currentRowNodeCache_=null,this.previousRowNodeCache_={},this.lastScreenWidth_=null,this.lastScreenHeight_=null,this.selectionEnabled_=!0,this.lastRowCount_=0,this.isScrolledEnd=!0,this.xrowCssRule_=null,this.currentScrollbarWidthPx=16,this.ctrlVPaste=!1,this.div_=null,this.document_=null,this.timeouts_={},this.observers_={},this.DEBUG_=!1};c.ScrollPort=f,c["default"]=f,f.Selection=function(a){this.scrollPort_=a,this.startRow=null,this.endRow=null,this.isMultiline=null,this.isCollapsed=null},f.Selection.prototype.findFirstChild=function(a,b){for(var c=a.firstChild;c;){if(-1!=b.indexOf(c))return c;if(c.childNodes.length){var d=this.findFirstChild(c,b);if(d)return d}c=c.nextSibling}return null},f.Selection.prototype.sync=function(){function a(){c.startRow=e,c.startNode=d.anchorNode,c.startOffset=d.anchorOffset,c.endRow=f,c.endNode=d.focusNode,c.endOffset=d.focusOffset}function b(){c.startRow=f,c.startNode=d.focusNode,c.startOffset=d.focusOffset,c.endRow=e,c.endNode=d.anchorNode,c.endOffset=d.anchorOffset}var c=this,d=this.scrollPort_.getDocument().getSelection();if(this.startRow=null,this.endRow=null,this.isMultiline=null,this.isCollapsed=!d||d.isCollapsed,!this.isCollapsed){for(var e=d.anchorNode;e&&!("rowIndex"in e);)e=e.parentNode;if(!e)return void console.error("Selection anchor is not rooted in a row node: "+d.anchorNode.nodeName);for(var f=d.focusNode;f&&!("rowIndex"in f);)f=f.parentNode;if(!f)return void console.error("Selection focus is not rooted in a row node: "+d.focusNode.nodeName);if(e.rowIndex<f.rowIndex)a();else if(e.rowIndex>f.rowIndex)b();else if(d.focusNode==d.anchorNode)d.anchorOffset<d.focusOffset?a():b();else{var g=this.findFirstChild(e,[d.anchorNode,d.focusNode]);if(!g)throw new Error("Unexpected error syncing selection.");g==d.anchorNode?a():b()}this.isMultiline=e.rowIndex!=f.rowIndex}},f.prototype.decorate=function(a){this.div_=a,this.iframe_=a.ownerDocument.createElement("iframe"),this.iframe_.style.cssText="border: 0;height: 100%;position: absolute;width: 100%","mozInnerScreenX"in window&&(this.iframe_.src="#"),a.appendChild(this.iframe_),this.iframe_.contentWindow.addEventListener("resize",this.onResize_.bind(this));var b=this.document_=this.iframe_.contentDocument;b.body.style.cssText="margin: 0px;padding: 0px;height: 100%;width: 100%;overflow: hidden;-webkit-user-select: none;-moz-user-select: none;";var c=b.createElement("style");c.textContent="x-row {}",b.head.appendChild(c),this.xrowCssRule_=b.styleSheets[0].cssRules[0],this.xrowCssRule_.style.display="block",this.userCssLink_=b.createElement("link"),this.userCssLink_.setAttribute("rel","stylesheet"),this.screen_=b.createElement("x-screen"),this.screen_.setAttribute("role","textbox"),this.screen_.setAttribute("tabindex","-1"),this.screen_.style.cssText="display: block;font-family: monospace;font-size: 15px;height: 100%;overflow-y: scroll; overflow-x: hidden;white-space: pre;width: 100%;outline: none !important",b.body.appendChild(this.screen_),this.screen_.addEventListener("scroll",this.onScroll_.bind(this)),this.screen_.addEventListener("mousewheel",this.onScrollWheel_.bind(this)),this.screen_.addEventListener("copy",this.onCopy_.bind(this)),this.screen_.addEventListener("paste",this.onPaste_.bind(this)),b.body.addEventListener("keydown",this.onBodyKeyDown_.bind(this)),this.rowNodes_=b.createElement("div"),this.rowNodes_.style.cssText="display: block;position: fixed;overflow: hidden;-webkit-user-select: text;-moz-user-select: text;",this.screen_.appendChild(this.rowNodes_),this.topSelectBag_=b.createElement("x-select-bag"),this.topSelectBag_.style.cssText="display: block;overflow: hidden;white-space: pre;",this.bottomSelectBag_=this.topSelectBag_.cloneNode(),this.topFold_=b.createElement("x-fold"),this.topFold_.style.cssText="display: block;",this.rowNodes_.appendChild(this.topFold_),this.bottomFold_=this.topFold_.cloneNode(),this.rowNodes_.appendChild(this.bottomFold_),this.scrollArea_=b.createElement("div"),this.scrollArea_.style.cssText="visibility: hidden",this.screen_.appendChild(this.scrollArea_),this.svg_=this.div_.ownerDocument.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg_.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svg_.setAttribute("version","1.1"),this.svg_.style.cssText="position: absolute;top: 0;left: 0;visibility: hidden",this.pasteTarget_=b.createElement("textarea"),this.pasteTarget_.setAttribute("tabindex","-1"),this.pasteTarget_.style.cssText="position: absolute;height: 1px;width: 1px;left: 0px; bottom: 0px;opacity: 0",this.pasteTarget_.contentEditable=!0,this.screen_.appendChild(this.pasteTarget_),this.pasteTarget_.addEventListener("textInput",this.handlePasteTargetTextInput_.bind(this)),this.resize()},f.prototype.setFontFamily=function(a){this.screen_.style.fontFamily=a,this.syncCharacterSize()},f.prototype.getFontFamily=function(){return this.screen_.style.fontFamily},f.prototype.setFontSmoothing=function(a){this.screen_.style.webkitFontSmoothing=a?a:"",this.syncCharacterSize()},f.prototype.setUserCss=function(a){a?(this.userCssLink_.setAttribute("href",a),this.userCssLink_.parentNode||this.document_.head.appendChild(this.userCssLink_)):this.userCssLink_.parentNode&&this.document_.head.removeChild(this.userCssLink_)},f.prototype.focus=function(){this.iframe_.focus(),this.screen_.focus()},f.prototype.getForegroundColor=function(){return this.screen_.style.color},f.prototype.setForegroundColor=function(a){this.screen_.style.color=a},f.prototype.getBackgroundColor=function(){return this.screen_.style.backgroundColor},f.prototype.setBackgroundColor=function(a){this.screen_.style.backgroundColor=a},f.prototype.setBackgroundImage=function(a){this.screen_.style.backgroundImage=a},f.prototype.setBackgroundSize=function(a){this.screen_.style.backgroundSize=a},f.prototype.setBackgroundPosition=function(a){this.screen_.style.backgroundPosition=a},f.prototype.setCtrlVPaste=function(a){this.ctrlVPaste=a},f.prototype.getScreenSize=function(){var a=e.dom.getClientSize(this.screen_);return{height:a.height,width:a.width-this.currentScrollbarWidthPx}},f.prototype.getScreenWidth=function(){return this.getScreenSize().width},f.prototype.getScreenHeight=function(){return this.getScreenSize().height},f.prototype.getDocument=function(){return this.document_},f.prototype.getScreenNode=function(){return this.screen_},f.prototype.resetCache=function(){this.currentRowNodeCache_=null,this.previousRowNodeCache_={}},f.prototype.setRowProvider=function(a){this.resetCache(),this.rowProvider_=a,this.scheduleRedraw()},f.prototype.invalidate=function(){for(var a=this.topFold_.nextSibling;a!=this.bottomFold_;){var b=a.nextSibling;a.parentElement.removeChild(a),a=b}this.previousRowNodeCache_=null;var c=this.getTopRowIndex(),d=this.getBottomRowIndex(c);this.drawVisibleRows_(c,d)},f.prototype.scheduleInvalidate=function(){if(!this.timeouts_.invalidate){var a=this;this.timeouts_.invalidate=setTimeout(function(){delete a.timeouts_.invalidate,a.invalidate()},0)}},f.prototype.setFontSize=function(a){this.screen_.style.fontSize=a+"px",this.syncCharacterSize()},f.prototype.getFontSize=function(){return parseInt(this.screen_.style.fontSize)},f.prototype.measureCharacterSize=function(a){this.ruler_||(this.ruler_=this.document_.createElement("div"),this.ruler_.style.cssText="position: absolute;top: 0;left: 0;visibility: hidden;height: auto !important;width: auto !important;",this.rulerSpan_=this.document_.createElement("span"),this.rulerSpan_.textContent="XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",this.ruler_.appendChild(this.rulerSpan_),this.rulerBaseline_=this.document_.createElement("span"),this.rulerBaseline_.style.fontSize="0px",this.rulerBaseline_.textContent="X"),this.rulerSpan_.style.fontWeight=a||"",this.rowNodes_.appendChild(this.ruler_);var b=e.dom.getClientSize(this.rulerSpan_),c=new d.Size(b.width/this.ruler_.textContent.length,b.height);return this.ruler_.appendChild(this.rulerBaseline_),c.baseline=this.rulerBaseline_.offsetTop,this.ruler_.removeChild(this.rulerBaseline_),this.rowNodes_.removeChild(this.ruler_),this.div_.ownerDocument.body.appendChild(this.svg_),c.zoomFactor=this.svg_.currentScale,this.div_.ownerDocument.body.removeChild(this.svg_),c},f.prototype.syncCharacterSize=function(){this.characterSize=this.measureCharacterSize();var a=this.characterSize.height+"px";this.xrowCssRule_.style.height=a,this.topSelectBag_.style.height=a,this.bottomSelectBag_.style.height=a,this.resize(),this.DEBUG_&&(this.document_.body.style.paddingTop=this.document_.body.style.paddingBottom=3*this.characterSize.height+"px")},f.prototype.resize=function(){this.currentScrollbarWidthPx=e.dom.getClientWidth(this.screen_)-this.screen_.clientWidth,this.syncScrollHeight(),this.syncRowNodesDimensions_();var a=this;this.publish("resize",{scrollPort:this},function(){a.scrollRowToBottom(a.rowProvider_.getRowCount()),a.scheduleRedraw()})},f.prototype.syncRowNodesDimensions_=function(){var a=this.getScreenSize();this.lastScreenWidth_=a.width,this.lastScreenHeight_=a.height,this.visibleRowCount=Math.floor(a.height/this.characterSize.height);var b=this.visibleRowCount*this.characterSize.height;this.visibleRowTopMargin=0,this.visibleRowBottomMargin=a.height-b,this.topFold_.style.marginBottom=this.visibleRowTopMargin+"px";for(var c=0,d=this.topFold_.previousSibling;d;)c+=e.dom.getClientHeight(d),d=d.previousSibling;this.rowNodes_.style.width=a.width+"px",this.rowNodes_.style.height=b+c+"px",this.rowNodes_.style.left=this.screen_.offsetLeft+"px",this.rowNodes_.style.top=this.screen_.offsetTop-c+"px"},f.prototype.syncScrollHeight=function(){this.lastRowCount_=this.rowProvider_.getRowCount(),this.scrollArea_.style.height=this.characterSize.height*this.lastRowCount_+this.visibleRowTopMargin+this.visibleRowBottomMargin+"px"},f.prototype.scheduleRedraw=function(){if(!this.timeouts_.redraw){var a=this;this.timeouts_.redraw=setTimeout(function(){delete a.timeouts_.redraw,a.redraw_()},0)}},f.prototype.redraw_=function(){this.resetSelectBags_(),this.selection.sync(),this.syncScrollHeight(),this.currentRowNodeCache_={};var a=this.getTopRowIndex(),b=this.getBottomRowIndex(a);this.drawTopFold_(a),this.drawBottomFold_(b),this.drawVisibleRows_(a,b),this.syncRowNodesDimensions_(),this.previousRowNodeCache_=this.currentRowNodeCache_,this.currentRowNodeCache_=null,this.isScrolledEnd=this.getTopRowIndex()+this.visibleRowCount>=this.lastRowCount_},f.prototype.drawTopFold_=function(a){if(!this.selection.startRow||this.selection.startRow.rowIndex>=a)return void(this.rowNodes_.firstChild!=this.topFold_&&this.rowNodes_.insertBefore(this.topFold_,this.rowNodes_.firstChild));if(!this.selection.isMultiline||this.selection.endRow.rowIndex>=a)this.selection.startRow.nextSibling!=this.topFold_&&this.rowNodes_.insertBefore(this.topFold_,this.selection.startRow.nextSibling);else for(this.selection.endRow.nextSibling!=this.topFold_&&this.rowNodes_.insertBefore(this.topFold_,this.selection.endRow.nextSibling);this.selection.startRow.nextSibling!=this.selection.endRow;)this.rowNodes_.removeChild(this.selection.startRow.nextSibling);for(;this.rowNodes_.firstChild!=this.selection.startRow;)this.rowNodes_.removeChild(this.rowNodes_.firstChild)},f.prototype.drawBottomFold_=function(a){if(!this.selection.endRow||this.selection.endRow.rowIndex<=a)return void(this.rowNodes_.lastChild!=this.bottomFold_&&this.rowNodes_.appendChild(this.bottomFold_));if(!this.selection.isMultiline||this.selection.startRow.rowIndex<=a)this.bottomFold_.nextSibling!=this.selection.endRow&&this.rowNodes_.insertBefore(this.bottomFold_,this.selection.endRow);else for(this.bottomFold_.nextSibling!=this.selection.startRow&&this.rowNodes_.insertBefore(this.bottomFold_,this.selection.startRow);this.selection.startRow.nextSibling!=this.selection.endRow;)this.rowNodes_.removeChild(this.selection.startRow.nextSibling);for(;this.rowNodes_.lastChild!=this.selection.endRow;)this.rowNodes_.removeChild(this.rowNodes_.lastChild)},f.prototype.drawVisibleRows_=function(a){function b(a,b){for(;a!=b;){if(!a)throw"Did not encounter target node";if(a==c.bottomFold_)throw"Encountered bottom fold before target node";var d=a;a=a.nextSibling,d.parentNode.removeChild(d)}}for(var c=this,d=this.selection.startRow,e=this.selection.endRow,f=this.bottomFold_,g=this.topFold_.nextSibling,h=Math.min(this.visibleRowCount,this.rowProvider_.getRowCount()),i=0;h>i;i++){var j,k=a+i;if(g!=f)if(g.rowIndex!=k)if(d&&d.rowIndex==k)b(g,d),g=d.nextSibling;else if(e&&e.rowIndex==k)b(g,e),g=e.nextSibling;else if(g!=d&&g!=e){if(j=this.fetchRowNode_(k),!j){console.log("Couldn't fetch row index: "+k);break}g!=j?(this.rowNodes_.insertBefore(j,g),this.rowNodes_.removeChild(g),g=j.nextSibling):g=g.nextSibling}else{if(j=this.fetchRowNode_(k),!j){console.log("Couldn't fetch row index: "+k);break}this.rowNodes_.insertBefore(j,g)}else g=g.nextSibling;else{if(j=this.fetchRowNode_(k),!j){console.log("Couldn't fetch row index: "+k);break}this.rowNodes_.insertBefore(j,g)}}g!=this.bottomFold_&&b(g,f)},f.prototype.resetSelectBags_=function(){this.topSelectBag_.parentNode&&(this.topSelectBag_.textContent="",this.topSelectBag_.parentNode.removeChild(this.topSelectBag_)),this.bottomSelectBag_.parentNode&&(this.bottomSelectBag_.textContent="",this.bottomSelectBag_.parentNode.removeChild(this.bottomSelectBag_))},f.prototype.cacheRowNode_=function(a){this.currentRowNodeCache_[a.rowIndex]=a},f.prototype.fetchRowNode_=function(a){var b;return b=this.previousRowNodeCache_&&a in this.previousRowNodeCache_?this.previousRowNodeCache_[a]:this.rowProvider_.getRowNode(a),this.currentRowNodeCache_&&this.cacheRowNode_(b),b},f.prototype.selectAll=function(){var a;if(0!==this.topFold_.nextSibling.rowIndex){for(;this.topFold_.previousSibling;)this.rowNodes_.removeChild(this.topFold_.previousSibling);a=this.fetchRowNode_(0),this.rowNodes_.insertBefore(a,this.topFold_),this.syncRowNodesDimensions_()}else a=this.topFold_.nextSibling;var b,c=this.rowProvider_.getRowCount()-1;if(this.bottomFold_.previousSibling.rowIndex!=c){for(;this.bottomFold_.nextSibling;)this.rowNodes_.removeChild(this.bottomFold_.nextSibling);b=this.fetchRowNode_(c),this.rowNodes_.appendChild(b)}else b=this.bottomFold_.previousSibling.rowIndex;var d=this.document_.getSelection();d.collapse(a,0),d.extend(b,b.childNodes.length),this.selection.sync()},f.prototype.getScrollMax_=function(){return e.dom.getClientHeight(this.scrollArea_)+this.visibleRowTopMargin+this.visibleRowBottomMargin-e.dom.getClientHeight(this.screen_)},f.prototype.scrollRowToTop=function(a){this.syncScrollHeight(),this.isScrolledEnd=a+this.visibleRowCount>=this.lastRowCount_;var b=a*this.characterSize.height+this.visibleRowTopMargin,c=this.getScrollMax_();b>c&&(b=c),this.screen_.scrollTop!=b&&(this.screen_.scrollTop=b,this.scheduleRedraw())},f.prototype.scrollRowToBottom=function(a){this.syncScrollHeight(),this.isScrolledEnd=a+this.visibleRowCount>=this.lastRowCount_;var b=a*this.characterSize.height+this.visibleRowTopMargin+this.visibleRowBottomMargin;b-=this.visibleRowCount*this.characterSize.height,0>b&&(b=0),this.screen_.scrollTop!=b&&(this.screen_.scrollTop=b)},f.prototype.getTopRowIndex=function(){return Math.floor(this.screen_.scrollTop/this.characterSize.height)},f.prototype.getBottomRowIndex=function(a){return a+this.visibleRowCount-1},f.prototype.onScroll_=function(){var a=this.getScreenSize();return a.width!=this.lastScreenWidth_||a.height!=this.lastScreenHeight_?void this.resize():(this.redraw_(),void this.publish("scroll",{scrollPort:this}))},f.prototype.onScrollWheel=function(){},f.prototype.onScrollWheel_=function(a){if(this.onScrollWheel(a),!a.defaultPrevented){var b=this.screen_.scrollTop-a.wheelDeltaY;0>b&&(b=0);var c=this.getScrollMax_();b>c&&(b=c),b!=this.screen_.scrollTop&&(this.screen_.scrollTop=b,a.preventDefault())}},f.prototype.onResize_=function(){this.syncCharacterSize(),this.resize()},f.prototype.onCopy=function(){},f.prototype.onCopy_=function(a){if(this.onCopy(a),!a.defaultPrevented&&(this.resetSelectBags_(),this.selection.sync(),this.selection.startRow&&!(this.selection.endRow.rowIndex-this.selection.startRow.rowIndex<2))){var b=this.getTopRowIndex(),c=this.getBottomRowIndex(b);if(this.selection.startRow.rowIndex<b){var d;d=this.selection.endRow.rowIndex<b?this.selection.endRow.rowIndex:this.topFold_.nextSibling.rowIndex,this.topSelectBag_.textContent=this.rowProvider_.getRowsText(this.selection.startRow.rowIndex+1,d),this.rowNodes_.insertBefore(this.topSelectBag_,this.selection.startRow.nextSibling),this.syncRowNodesDimensions_()}if(this.selection.endRow.rowIndex>c){var e;e=this.selection.startRow.rowIndex>c?this.selection.startRow.rowIndex+1:this.bottomFold_.previousSibling.rowIndex+1,this.bottomSelectBag_.textContent=this.rowProvider_.getRowsText(e,this.selection.endRow.rowIndex),this.rowNodes_.insertBefore(this.bottomSelectBag_,this.selection.endRow)}}},f.prototype.onBodyKeyDown_=function(a){if(this.ctrlVPaste){var b=String.fromCharCode(a.which),c=b.toLowerCase();(a.ctrlKey||a.metaKey)&&"v"==c&&this.pasteTarget_.focus()}},f.prototype.onPaste_=function(){this.pasteTarget_.focus();var a=this;setTimeout(function(){a.publish("paste",{text:a.pasteTarget_.value}),a.pasteTarget_.value="",a.screen_.focus()},0)},f.prototype.handlePasteTargetTextInput_=function(a){a.stopPropagation()},f.prototype.setScrollbarVisible=function(a){this.screen_.style.overflowY=a?"scroll":"hidden"}}),define("hterm/struct",["hterm/struct/cursor_shape","hterm/struct/key_actions","hterm/struct/rowcol","hterm/struct/size","hterm/struct/terminal_options","exports"],function(a,b,c,d,e,f){"use strict";var g=a["default"],h=b["default"],i=c["default"],j=d["default"],k=e["default"],l={cursorShape:g,keyActions:h,RowCol:i,Size:j,TerminalOptions:k};f.struct=l,f["default"]=l}),define("hterm/struct/cursor_shape",["exports"],function(a){"use strict";var b={BLOCK:"BLOCK",BEAM:"BEAM",UNDERLINE:"UNDERLINE"};a.cursorShape=b,a["default"]=b}),define("hterm/struct/key_actions",["exports"],function(a){"use strict";var b={CANCEL:new String("CANCEL"),DEFAULT:new String("DEFAULT"),PASS:new String("PASS"),STRIP:new String("STRIP")};a.keyActions=b,a["default"]=b}),define("hterm/struct/rowcol",["exports"],function(a){"use strict";var b=function(a,b,c){this.row=a,this.column=b,this.overflow=!!c};a.RowCol=b,a["default"]=b,b.prototype.move=function(a,b,c){this.row=a,this.column=b,this.overflow=!!c},b.prototype.clone=function(){return new b(this.row,this.column,this.overflow)},b.prototype.setTo=function(a){this.row=a.row,this.column=a.column,this.overflow=a.overflow},b.prototype.equals=function(a){return this.row==a.row&&this.column==a.column&&this.overflow==a.overflow},b.prototype.toString=function(){return"[RowCol: "+this.row+", "+this.column+", "+this.overflow+"]"}}),define("hterm/struct/size",["exports"],function(a){"use strict";var b=function(a,b){this.width=a,this.height=b};a.Size=b,a["default"]=b,b.prototype.resize=function(a,b){this.width=a,this.height=b},b.prototype.clone=function(){return new b(this.width,this.height)},b.prototype.setTo=function(a){this.width=a.width,this.height=a.height},b.prototype.equals=function(a){return this.width==a.width&&this.height==a.height},b.prototype.toString=function(){return"[Size: "+this.width+", "+this.height+"]"}}),define("hterm/struct/terminal_options",["exports"],function(a){"use strict";var b=function(a){this.wraparound=a?a.wraparound:!0,this.reverseWraparound=a?a.reverseWraparound:!1,this.originMode=a?a.originMode:!1,this.autoCarriageReturn=a?a.autoCarriageReturn:!1,this.cursorVisible=a?a.cursorVisible:!1,this.cursorBlink=a?a.cursorBlink:!1,this.insertMode=a?a.insertMode:!1,this.reverseVideo=a?a.reverseVideo:!1,this.bracketedPaste=a?a.bracketedPaste:!1};a.TerminalOptions=b,a["default"]=b}),define("hterm/terminal",["hterm/resource/ding","hterm/i18n","hterm/struct","hterm/terminal_config_observers","hterm/util","hterm/config","hterm/keyboard","hterm/screen","hterm/scrollport","hterm/terminal_io","hterm/text_attributes","hterm/vt","exports"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";var n=a["default"],o=b["default"],p=c["default"],q=d["default"],r=e["default"],s=f["default"],t=g["default"],u=h["default"],v=i["default"],w=j["default"],x=k["default"],y=l["default"],z=function(a){this.config=a||new s,this.primaryScreen_=new u,this.alternateScreen_=new u,this.screen_=this.primaryScreen_,this.screenSize=new p.Size(0,0),this.scrollPort_=new v(this),this.scrollPort_.subscribe("resize",this.onResize_.bind(this)),this.scrollPort_.subscribe("scroll",this.onScroll_.bind(this)),this.scrollPort_.subscribe("paste",this.onPaste_.bind(this)),this.scrollPort_.onCopy=this.onCopy_.bind(this),this.div_=null,this.document_=window.document,this.scrollbackRows_=[],this.tabStops_=[],this.defaultTabStops=!0,this.vtScrollTop_=null,this.vtScrollBottom_=null,this.cursorNode_=null,this.cursorShape_=p.cursorShape.BLOCK,this.cursorColor_=null,this.cursorBlinkCycle_=this.config.get("cursor-blink-cycle"),this.myOnCursorBlink_=this.onCursorBlink_.bind(this),this.backgroundColor_=this.config.get("background-color"),this.foregroundColor_=this.config.get("foreground-color"),this.scrollOnOutput_=this.config.get("scroll-on-output"),this.scrollOnKeystroke_=this.config.get("scroll-on-keystroke"),this.reportMouseEvents_=!1,this.bellAudio_=this.document_.createElement("audio"),this.bellAudio_.setAttribute("preload","auto"),this.syncBellAudio_(),this.bellNotificationList_=[],this.desktopNotificationBell_=!1,this.savedOptions_={},this.options_=new p.TerminalOptions,this.timeouts_={},this.vt=new y(this),this.keyboard=new t(this),this.io=new w(this),this.enableMouseDragScroll=!0,this.copyOnSelect=this.config.get("copy-on-select"),this.setMousePasteButton(this.config.get("mouse-paste-button")),this.useDefaultWindowCopy=!1,this.clearSelectionAfterCopy=this.config.get("clear-selection-after-copy"),this.realizeSize_(80,24),this.setDefaultTabStops()};m.Terminal=z,m["default"]=z,z.prototype.tabWidth=8,z.prototype.setBracketedPaste=function(a){this.options_.bracketedPaste=a},z.prototype.setCursorColor=function(a){this.cursorColor_=a,this.cursorNode_.style.backgroundColor=a,this.cursorNode_.style.borderColor=a
},z.prototype.getCursorColor=function(){return this.cursorColor_},z.prototype.setSelectionEnabled=function(a){this.enableMouseDragScroll=a},z.prototype.setBackgroundColor=function(a){this.backgroundColor_=r.colors.normalizeCSS(a),this.primaryScreen_.textAttributes.setDefaults(this.foregroundColor_,this.backgroundColor_),this.alternateScreen_.textAttributes.setDefaults(this.foregroundColor_,this.backgroundColor_),this.scrollPort_.setBackgroundColor(a)},z.prototype.getBackgroundColor=function(){return this.backgroundColor_},z.prototype.setForegroundColor=function(a){this.foregroundColor_=r.colors.normalizeCSS(a),this.primaryScreen_.textAttributes.setDefaults(this.foregroundColor_,this.backgroundColor_),this.alternateScreen_.textAttributes.setDefaults(this.foregroundColor_,this.backgroundColor_),this.scrollPort_.setForegroundColor(a)},z.prototype.getForegroundColor=function(){return this.foregroundColor_},z.prototype.isPrimaryScreen=function(){return this.screen_==this.primaryScreen_},z.prototype.installKeyboard=function(){this.keyboard.installKeyboard(this.scrollPort_.getDocument().body)},z.prototype.uninstallKeyboard=function(){this.keyboard.installKeyboard(null)},z.prototype.setFontSize=function(a){0===a&&(a=this.config.get("font-size")),this.scrollPort_.setFontSize(a),this.wcCssRule_&&(this.wcCssRule_.style.width=2*this.scrollPort_.characterSize.width+"px")},z.prototype.getFontSize=function(){return this.scrollPort_.getFontSize()},z.prototype.setFontFamily=function(a){this.scrollPort_.setFontFamily(a)},z.prototype.getFontFamily=function(){return this.scrollPort_.getFontFamily()},z.prototype.setFontSmoothing=function(a){this.scrollPort_.setFontSmoothing(a)},z.prototype.setMousePasteButton=function(a){if("number"==typeof a)return void(this.mousePasteButton=a);var b=navigator.userAgent.match(/\(X11;\s+(\S+)/);this.mousePasteButton=b&&"CrOS"!=b[2]?3:2},z.prototype.setBoldSafeState=function(a){if(null!==a)return this.primaryScreen_.textAttributes.enableBold=a,void(this.alternateScreen_.textAttributes.enableBold=a);var b=this.scrollPort_.measureCharacterSize(),c=this.scrollPort_.measureCharacterSize("bold"),d=b.equals(c);d||console.warn("Bold characters disabled: Size of bold weight differs from normal.  Font family is: "+this.scrollPort_.getFontFamily()),this.primaryScreen_.textAttributes.enableBold=d,this.alternateScreen_.textAttributes.enableBold=d},z.prototype.saveCursor=function(){return this.screen_.cursorPosition.clone()},z.prototype.getTextAttributes=function(){return this.screen_.textAttributes},z.prototype.setTextAttributes=function(a){this.screen_.textAttributes=a},z.prototype.getZoomFactor=function(){return this.scrollPort_.characterSize.zoomFactor},z.prototype.setWindowTitle=function(a){window.document.title=a},z.prototype.restoreCursor=function(a){var b=r.f.clamp(a.row,0,this.screenSize.height-1),c=r.f.clamp(a.column,0,this.screenSize.width-1);this.screen_.setCursorPosition(b,c),(a.column>c||a.column==c&&a.overflow)&&(this.screen_.cursorPosition.overflow=!0)},z.prototype.clearCursorOverflow=function(){this.screen_.cursorPosition.overflow=!1},z.prototype.setCursorShape=function(a){this.cursorShape_=a,this.restyleCursor_()},z.prototype.getCursorShape=function(){return this.cursorShape_},z.prototype.setWidth=function(a){return null==a?void(this.div_.style.width="100%"):(this.div_.style.width=Math.ceil(this.scrollPort_.characterSize.width*a+this.scrollPort_.currentScrollbarWidthPx)+"px",this.realizeSize_(a,this.screenSize.height),void this.scheduleSyncCursorPosition_())},z.prototype.setHeight=function(a){return null==a?void(this.div_.style.height="100%"):(this.div_.style.height=this.scrollPort_.characterSize.height*a+"px",this.realizeSize_(this.screenSize.width,a),void this.scheduleSyncCursorPosition_())},z.prototype.realizeSize_=function(a,b){a!=this.screenSize.width&&this.realizeWidth_(a),b!=this.screenSize.height&&this.realizeHeight_(b),this.io.onTerminalResize_(a,b)},z.prototype.realizeWidth_=function(a){if(0>=a)throw new Error("Attempt to realize bad width: "+a);var b=a-this.screen_.getWidth();if(this.screenSize.width=a,this.screen_.setColumnCount(a),b>0)this.defaultTabStops&&this.setDefaultTabStops(this.screenSize.width-b);else for(var c=this.tabStops_.length-1;c>=0&&!(this.tabStops_[c]<a);c--)this.tabStops_.pop();this.screen_.setColumnCount(this.screenSize.width)},z.prototype.realizeHeight_=function(a){if(0>=a)throw new Error("Attempt to realize bad height: "+a);var b=a-this.screen_.getHeight();this.screenSize.height=a;var c=this.saveCursor();if(0>b){for(b*=-1;b;){var d=this.getRowCount()-1;if(d-this.scrollbackRows_.length==c.row)break;if(this.getRowText(d))break;this.screen_.popRow(),b--}var e=this.screen_.shiftRows(b);this.scrollbackRows_.push.apply(this.scrollbackRows_,e),c.row=Math.max(c.row-b,0)}else if(b>0){if(b<=this.scrollbackRows_.length){var f=Math.min(b,this.scrollbackRows_.length),g=this.scrollbackRows_.splice(this.scrollbackRows_.length-f,f);this.screen_.unshiftRows(g),b-=f,c.row+=f}b&&this.appendRows_(b)}this.setVTScrollRegion(null,null),this.restoreCursor(c)},z.prototype.scrollHome=function(){this.scrollPort_.scrollRowToTop(0)},z.prototype.scrollEnd=function(){this.scrollPort_.scrollRowToBottom(this.getRowCount())},z.prototype.scrollPageUp=function(){var a=this.scrollPort_.getTopRowIndex();this.scrollPort_.scrollRowToTop(a-this.screenSize.height+1)},z.prototype.scrollPageDown=function(){var a=this.scrollPort_.getTopRowIndex();this.scrollPort_.scrollRowToTop(a+this.screenSize.height-1)},z.prototype.wipeContents=function(){this.scrollbackRows_.length=0,this.scrollPort_.resetCache(),[this.primaryScreen_,this.alternateScreen_].forEach(function(a){var b=a.getHeight();b>0&&(this.renumberRows_(0,b),this.clearHome(a))}.bind(this)),this.syncCursorPosition_(),this.scrollPort_.invalidate()},z.prototype.reset=function(){this.clearAllTabStops(),this.setDefaultTabStops(),this.clearHome(this.primaryScreen_),this.primaryScreen_.textAttributes.reset(),this.clearHome(this.alternateScreen_),this.alternateScreen_.textAttributes.reset(),this.setCursorBlink(!!this.config.get("cursor-blink")),this.vt.reset(),this.softReset()},z.prototype.softReset=function(){this.options_=new p.TerminalOptions,this.primaryScreen_.textAttributes.resetColorPalette(),this.alternateScreen_.textAttributes.resetColorPalette(),this.setVTScrollRegion(null,null),this.setCursorVisible(!0)},z.prototype.forwardTabStop=function(){for(var a=this.screen_.cursorPosition.column,b=0;b<this.tabStops_.length;b++)if(this.tabStops_[b]>a)return void this.setCursorColumn(this.tabStops_[b]);var c=this.screen_.cursorPosition.overflow;this.setCursorColumn(this.screenSize.width-1),this.screen_.cursorPosition.overflow=c},z.prototype.backwardTabStop=function(){for(var a=this.screen_.cursorPosition.column,b=this.tabStops_.length-1;b>=0;b--)if(this.tabStops_[b]<a)return void this.setCursorColumn(this.tabStops_[b]);this.setCursorColumn(1)},z.prototype.setTabStop=function(a){for(var b=this.tabStops_.length-1;b>=0;b--){if(this.tabStops_[b]==a)return;if(this.tabStops_[b]<a)return void this.tabStops_.splice(b+1,0,a)}this.tabStops_.splice(0,0,a)},z.prototype.clearTabStopAtCursor=function(){var a=this.screen_.cursorPosition.column,b=this.tabStops_.indexOf(a);-1!=b&&this.tabStops_.splice(b,1)},z.prototype.clearAllTabStops=function(){this.tabStops_.length=0,this.defaultTabStops=!1},z.prototype.setDefaultTabStops=function(a){var b=a||0,c=this.tabWidth;b=b-1-(b-1)%c+c;for(var d=b;d<this.screenSize.width;d+=c)this.setTabStop(d);this.defaultTabStops=!0},z.prototype.interpret=function(a){this.vt.interpret(a),this.scheduleSyncCursorPosition_()},z.prototype.decorate=function(a){this.div_=a,this.config.addObserver(function(a,b){a in q&&q.call(this,b)}.bind(this)),this.scrollPort_.decorate(a),this.scrollPort_.setBackgroundImage(this.config.get("background-image")),this.scrollPort_.setBackgroundSize(this.config.get("background-size")),this.scrollPort_.setBackgroundPosition(this.config.get("background-position")),this.scrollPort_.setUserCss(this.config.get("user-css")),this.div_.focus=this.focus.bind(this),this.setFontSize(this.config.get("font-size")),this.setFontFamily(this.config.get("font-family")),this.setFontSmoothing(this.config.get("font-smoothing")),this.setScrollbarVisible(this.config.get("scrollbar-visible")),this.document_=this.scrollPort_.getDocument(),this.document_.body.oncontextmenu=function(){return!1};var b=this.onMouse_.bind(this),c=this.scrollPort_.getScreenNode();c.addEventListener("mousedown",b),c.addEventListener("mouseup",b),c.addEventListener("mousemove",b),this.scrollPort_.onScrollWheel=b,c.addEventListener("focus",this.onFocusChange_.bind(this,!0)),c.addEventListener("mousedown",function(){setTimeout(this.onFocusChange_.bind(this,!0))}.bind(this)),c.addEventListener("blur",this.onFocusChange_.bind(this,!1));var d=this.document_.createElement("style");d.textContent='.cursor-node[focus="false"] {  box-sizing: border-box;  background-color: transparent !important;  border-width: 2px;  border-style: solid;}.wc-node {  display: inline-block;  text-align: center;  width: '+2*this.scrollPort_.characterSize.width+"px;}",this.document_.head.appendChild(d);var e=this.document_.styleSheets,f=e[e.length-1].cssRules;this.wcCssRule_=f[f.length-1],this.cursorNode_=this.document_.createElement("div"),this.cursorNode_.className="cursor-node",this.cursorNode_.style.cssText="position: absolute;top: -99px;display: block;width: "+this.scrollPort_.characterSize.width+"px;height: "+this.scrollPort_.characterSize.height+"px;-webkit-transition: opacity, background-color 100ms linear;-moz-transition: opacity, background-color 100ms linear;",this.setCursorColor(this.config.get("cursor-color")),this.setCursorBlink(!!this.config.get("cursor-blink")),this.restyleCursor_(),this.document_.body.appendChild(this.cursorNode_),this.scrollBlockerNode_=this.document_.createElement("div"),this.scrollBlockerNode_.style.cssText="position: absolute;top: -99px;display: block;width: 10px;height: 10px;",this.document_.body.appendChild(this.scrollBlockerNode_),this.scrollPort_.onScrollWheel=b,["mousedown","mouseup","mousemove","click","dblclick"].forEach(function(a){this.scrollBlockerNode_.addEventListener(a,b),this.cursorNode_.addEventListener(a,b),this.document_.addEventListener(a,b)}.bind(this)),this.cursorNode_.addEventListener("mousedown",function(){setTimeout(this.focus.bind(this))}.bind(this)),this.setReverseVideo(!1),this.scrollPort_.focus(),this.scrollPort_.scheduleRedraw()},z.prototype.getDocument=function(){return this.document_},z.prototype.focus=function(){this.scrollPort_.focus()},z.prototype.getRowNode=function(a){if(a<this.scrollbackRows_.length)return this.scrollbackRows_[a];var b=a-this.scrollbackRows_.length;return this.screen_.rowsArray[b]},z.prototype.getRowsText=function(a,b){for(var c=[],d=a;b>d;d++){var e=this.getRowNode(d);c.push(e.textContent),b-1>d&&!e.getAttribute("line-overflow")&&c.push("\n")}return c.join("")},z.prototype.getRowText=function(a){var b=this.getRowNode(a);return b.textContent},z.prototype.getRowCount=function(){return this.scrollbackRows_.length+this.screen_.rowsArray.length},z.prototype.appendRows_=function(a){for(var b=this.screen_.rowsArray.length,c=this.scrollbackRows_.length+b,d=0;a>d;d++){var e=this.document_.createElement("x-row");e.appendChild(this.document_.createTextNode("")),e.rowIndex=c+d,this.screen_.pushRow(e)}var f=this.screen_.rowsArray.length-this.screenSize.height;if(f>0){var g=this.screen_.shiftRows(f);Array.prototype.push.apply(this.scrollbackRows_,g),this.scrollPort_.isScrolledEnd&&this.scheduleScrollDown_()}b>=this.screen_.rowsArray.length&&(b=this.screen_.rowsArray.length-1),this.setAbsoluteCursorPosition(b,0)},z.prototype.moveRows_=function(a,b,c){var d=this.screen_.removeRows(a,b);this.screen_.insertRows(c,d);var e,f;c>a?(e=a,f=c+b):(e=c,f=a+b),this.renumberRows_(e,f),this.scrollPort_.scheduleInvalidate()},z.prototype.renumberRows_=function(a,b,c){for(var d=c||this.screen_,e=this.scrollbackRows_.length,f=a;b>f;f++)d.rowsArray[f].rowIndex=e+f},z.prototype.print=function(a){for(var b=0,c=o.wc.strWidth(a);c>b;){this.options_.wraparound&&this.screen_.cursorPosition.overflow&&(this.screen_.commitLineOverflow(),this.newLine());var d,e=c-b,f=!1;this.screen_.cursorPosition.column+e>=this.screenSize.width&&(f=!0,e=this.screenSize.width-this.screen_.cursorPosition.column),f&&!this.options_.wraparound?(d=o.wc.substr(a,b,e-1)+o.wc.substr(a,c-1),e=c):d=o.wc.substr(a,b,e);for(var g=x.splitWidecharString(d),h=0;h<g.length;h++)g[h].wcNode&&(this.screen_.textAttributes.wcNode=!0),this.options_.insertMode?this.screen_.insertString(g[h].str):this.screen_.overwriteString(g[h].str),this.screen_.textAttributes.wcNode=!1;this.screen_.maybeClipCurrentRow(),b+=e}this.scheduleSyncCursorPosition_(),this.scrollOnOutput_&&this.scrollPort_.scrollRowToBottom(this.getRowCount())},z.prototype.setVTScrollRegion=function(a,b){0===a&&b==this.screenSize.height-1?(this.vtScrollTop_=null,this.vtScrollBottom_=null):(this.vtScrollTop_=a,this.vtScrollBottom_=b)},z.prototype.getVTScrollTop=function(){return null!=this.vtScrollTop_?this.vtScrollTop_:0},z.prototype.getVTScrollBottom=function(){return null!=this.vtScrollBottom_?this.vtScrollBottom_:this.screenSize.height-1},z.prototype.newLine=function(){var a=this.screen_.cursorPosition.row==this.screen_.rowsArray.length-1;null!=this.vtScrollBottom_?this.screen_.cursorPosition.row==this.vtScrollBottom_?(this.vtScrollUp(1),this.setAbsoluteCursorPosition(this.screen_.cursorPosition.row,0)):a?this.setAbsoluteCursorPosition(this.screen_.cursorPosition.row,0):this.setAbsoluteCursorPosition(this.screen_.cursorPosition.row+1,0):a?this.appendRows_(1):this.setAbsoluteCursorPosition(this.screen_.cursorPosition.row+1,0)},z.prototype.lineFeed=function(){var a=this.screen_.cursorPosition.column;this.newLine(),this.setCursorColumn(a)},z.prototype.formFeed=function(){this.options_.autoCarriageReturn?this.newLine():this.lineFeed()},z.prototype.reverseLineFeed=function(){var a=this.getVTScrollTop(),b=this.screen_.cursorPosition.row;b==a?this.insertLines(1):this.setAbsoluteCursorRow(b-1)},z.prototype.eraseToLeft=function(){var a=this.saveCursor();this.setCursorColumn(0),this.screen_.overwriteString(r.string.getWhitespace(a.column+1)),this.restoreCursor(a)},z.prototype.eraseToRight=function(a){if(!this.screen_.cursorPosition.overflow){var b=this.screenSize.width-this.screen_.cursorPosition.column,c=a?Math.min(a,b):b;if(this.screen_.textAttributes.background===this.screen_.textAttributes.DEFAULT_COLOR){var d=this.screen_.rowsArray[this.screen_.cursorPosition.row];if(x.nodeWidth(d)<=this.screen_.cursorPosition.column+c)return this.screen_.deleteChars(c),void this.clearCursorOverflow()}var e=this.saveCursor();this.screen_.overwriteString(r.string.getWhitespace(c)),this.restoreCursor(e),this.clearCursorOverflow()}},z.prototype.eraseLine=function(){var a=this.saveCursor();this.screen_.clearCursorRow(),this.restoreCursor(a),this.clearCursorOverflow()},z.prototype.eraseAbove=function(){var a=this.saveCursor();this.eraseToLeft();for(var b=0;b<a.row;b++)this.setAbsoluteCursorPosition(b,0),this.screen_.clearCursorRow();this.restoreCursor(a),this.clearCursorOverflow()},z.prototype.eraseBelow=function(){var a=this.saveCursor();this.eraseToRight();for(var b=this.screenSize.height-1,c=a.row+1;b>=c;c++)this.setAbsoluteCursorPosition(c,0),this.screen_.clearCursorRow();this.restoreCursor(a),this.clearCursorOverflow()},z.prototype.fill=function(a){var b=this.saveCursor();this.setAbsoluteCursorPosition(0,0);for(var c=0;c<this.screenSize.height;c++)for(var d=0;d<this.screenSize.width;d++)this.setAbsoluteCursorPosition(c,d),this.screen_.overwriteString(a);this.restoreCursor(b)},z.prototype.clearHome=function(a){var b=a||this.screen_,c=b.getHeight();if(0!==c){for(var d=0;c>d;d++)b.setCursorPosition(d,0),b.clearCursorRow();b.setCursorPosition(0,0)}},z.prototype.clear=function(a){var b=a||this.screen_,c=b.cursorPosition.clone();this.clearHome(b),b.setCursorPosition(c.row,c.column)},z.prototype.insertLines=function(a){var b=this.screen_.cursorPosition.row,c=this.getVTScrollBottom();a=Math.min(a,c-b);var d=c-b-a+1;d&&this.moveRows_(b,d,b+a);for(var e=a-1;e>=0;e--)this.setAbsoluteCursorPosition(b+e,0),this.screen_.clearCursorRow()},z.prototype.deleteLines=function(a){var b=this.saveCursor(),c=b.row,d=this.getVTScrollBottom(),e=d-c+1;a=Math.min(a,e);var f=d-a+1;a!=e&&this.moveRows_(c,a,f);for(var g=0;a>g;g++)this.setAbsoluteCursorPosition(f+g,0),this.screen_.clearCursorRow();this.restoreCursor(b),this.clearCursorOverflow()},z.prototype.insertSpace=function(a){var b=this.saveCursor(),c=r.string.getWhitespace(a||1);this.screen_.insertString(c),this.screen_.maybeClipCurrentRow(),this.restoreCursor(b),this.clearCursorOverflow()},z.prototype.deleteChars=function(a){var b=this.screen_.deleteChars(a);if(b&&!this.screen_.textAttributes.isDefault()){var c=this.saveCursor();this.setCursorColumn(this.screenSize.width-b),this.screen_.insertString(r.string.getWhitespace(b)),this.restoreCursor(c)}this.clearCursorOverflow()},z.prototype.vtScrollUp=function(a){var b=this.saveCursor();this.setAbsoluteCursorRow(this.getVTScrollTop()),this.deleteLines(a),this.restoreCursor(b)},z.prototype.vtScrollDown=function(a){var b=this.saveCursor();this.setAbsoluteCursorPosition(this.getVTScrollTop(),0),this.insertLines(a),this.restoreCursor(b)},z.prototype.setCursorPosition=function(a,b){this.options_.originMode?this.setRelativeCursorPosition(a,b):this.setAbsoluteCursorPosition(a,b)},z.prototype.setRelativeCursorPosition=function(a,b){var c=this.getVTScrollTop();a=r.f.clamp(a+c,c,this.getVTScrollBottom()),b=r.f.clamp(b,0,this.screenSize.width-1),this.screen_.setCursorPosition(a,b)},z.prototype.setAbsoluteCursorPosition=function(a,b){a=r.f.clamp(a,0,this.screenSize.height-1),b=r.f.clamp(b,0,this.screenSize.width-1),this.screen_.setCursorPosition(a,b)},z.prototype.setCursorColumn=function(a){this.setAbsoluteCursorPosition(this.screen_.cursorPosition.row,a)},z.prototype.getCursorColumn=function(){return this.screen_.cursorPosition.column},z.prototype.setAbsoluteCursorRow=function(a){this.setAbsoluteCursorPosition(a,this.screen_.cursorPosition.column)},z.prototype.getCursorRow=function(){return this.screen_.cursorPosition.row},z.prototype.scheduleRedraw_=function(){if(!this.timeouts_.redraw){var a=this;this.timeouts_.redraw=setTimeout(function(){delete a.timeouts_.redraw,a.scrollPort_.redraw_()},0)}},z.prototype.scheduleScrollDown_=function(){if(!this.timeouts_.scrollDown){var a=this;this.timeouts_.scrollDown=setTimeout(function(){delete a.timeouts_.scrollDown,a.scrollPort_.scrollRowToBottom(a.getRowCount())},10)}},z.prototype.cursorUp=function(a){return this.cursorDown(-(a||1))},z.prototype.cursorDown=function(a){a=a||1;var b=this.options_.originMode?this.getVTScrollTop():0,c=this.options_.originMode?this.getVTScrollBottom():this.screenSize.height-1,d=r.f.clamp(this.screen_.cursorPosition.row+a,b,c);this.setAbsoluteCursorRow(d)},z.prototype.cursorLeft=function(a){if(a=a||1,!(1>a)){var b,c=this.screen_.cursorPosition.column;if(this.options_.reverseWraparound){if(this.screen_.cursorPosition.overflow&&(a--,this.clearCursorOverflow(),!a))return;var d=this.screen_.cursorPosition.row;b=c-a,0>b&&(d=d-Math.floor(a/this.screenSize.width)-1,0>d&&(d=this.screenSize.height+d%this.screenSize.height),b=this.screenSize.width+b%this.screenSize.width),this.setCursorPosition(Math.max(d,0),b)}else b=Math.max(c-a,0),this.setCursorColumn(b)}},z.prototype.cursorRight=function(a){if(a=a||1,!(1>a)){var b=r.f.clamp(this.screen_.cursorPosition.column+a,0,this.screenSize.width-1);this.setCursorColumn(b)}},z.prototype.setReverseVideo=function(a){this.options_.reverseVideo=a,a?(this.scrollPort_.setForegroundColor(this.config.get("background-color")),this.scrollPort_.setBackgroundColor(this.config.get("foreground-color"))):(this.scrollPort_.setForegroundColor(this.config.get("foreground-color")),this.scrollPort_.setBackgroundColor(this.config.get("background-color")))},z.prototype.ringBell=function(){this.cursorNode_.style.backgroundColor=this.scrollPort_.getForegroundColor();var a=this;if(setTimeout(function(){a.cursorNode_.style.backgroundColor=a.config.get("cursor-color")},200),!this.bellSquelchTimeout_&&(this.bellAudio_.getAttribute("src")?(this.bellAudio_.play(),this.bellSequelchTimeout_=setTimeout(function(){delete this.bellSquelchTimeout_}.bind(this),500)):delete this.bellSquelchTimeout_,this.desktopNotificationBell_&&!this.document_.hasFocus())){var b=new Notification(r.string.replaceVars(o.msg.desktopNotificationTitle,{title:window.document.title||"hterm"}));this.bellNotificationList_.push(b),b.onclick=function(){a.closeBellNotifications_()}}},z.prototype.syncBellAudio_=function(){var a=this.config.get("audible-bell-sound");a&&"x-resource:ding"==a?this.bellAudio_.setAttribute("src",n.getDataUrl()):this.bellAudio_.setAttribute("src",a)},z.prototype.setOriginMode=function(a){this.options_.originMode=a,this.setCursorPosition(0,0)},z.prototype.setInsertMode=function(a){this.options_.insertMode=a},z.prototype.setAutoCarriageReturn=function(a){this.options_.autoCarriageReturn=a},z.prototype.setWraparound=function(a){this.options_.wraparound=a},z.prototype.setReverseWraparound=function(a){this.options_.reverseWraparound=a},z.prototype.setAlternateMode=function(a){var b=this.saveCursor();if(this.screen_=a?this.alternateScreen_:this.primaryScreen_,this.screen_.rowsArray.length&&this.screen_.rowsArray[0].rowIndex!=this.scrollbackRows_.length)for(var c=this.scrollbackRows_.length,d=this.screen_.rowsArray,e=0;e<d.length;e++)d[e].rowIndex=c+e;this.realizeWidth_(this.screenSize.width),this.realizeHeight_(this.screenSize.height),this.scrollPort_.syncScrollHeight(),this.scrollPort_.invalidate(),this.restoreCursor(b),this.scrollPort_.resize()},z.prototype.setCursorBlink=function(a){this.options_.cursorBlink=a,!a&&this.timeouts_.cursorBlink&&(clearTimeout(this.timeouts_.cursorBlink),delete this.timeouts_.cursorBlink),this.options_.cursorVisible&&this.setCursorVisible(!0)},z.prototype.setCursorVisible=function(a){if(this.options_.cursorVisible=a,!a)return void(this.cursorNode_.style.opacity="0");if(this.syncCursorPosition_(),this.cursorNode_.style.opacity="1",this.options_.cursorBlink){if(this.timeouts_.cursorBlink)return;this.onCursorBlink_()}else this.timeouts_.cursorBlink&&(clearTimeout(this.timeouts_.cursorBlink),delete this.timeouts_.cursorBlink)},z.prototype.syncCursorPosition_=function(){var a=this.scrollPort_.getTopRowIndex(),b=this.scrollPort_.getBottomRowIndex(a),c=this.scrollbackRows_.length+this.screen_.cursorPosition.row;if(c>b)return void(this.cursorNode_.style.top=-this.scrollPort_.characterSize.height+"px");this.options_.cursorVisible&&"none"==this.cursorNode_.style.display&&(this.cursorNode_.style.display=""),this.cursorNode_.style.top=this.scrollPort_.visibleRowTopMargin+this.scrollPort_.characterSize.height*(c-a)+"px",this.cursorNode_.style.left=this.scrollPort_.characterSize.width*this.screen_.cursorPosition.column+"px",this.cursorNode_.setAttribute("title","("+this.screen_.cursorPosition.row+", "+this.screen_.cursorPosition.column+")");var d=this.document_.getSelection();d&&d.isCollapsed&&this.screen_.syncSelectionCaret(d)},z.prototype.restyleCursor_=function(){var a=this.cursorShape_;"false"==this.cursorNode_.getAttribute("focus")&&(a=p.cursorShape.BLOCK);var b=this.cursorNode_.style;switch(b.width=this.scrollPort_.characterSize.width+"px",a){case p.cursorShape.BEAM:b.height=this.scrollPort_.characterSize.height+"px",b.backgroundColor="transparent",b.borderBottomStyle=null,b.borderLeftStyle="solid";break;case p.cursorShape.UNDERLINE:b.height=this.scrollPort_.characterSize.baseline+"px",b.backgroundColor="transparent",b.borderBottomStyle="solid",b.borderLeftStyle=null;break;default:b.height=this.scrollPort_.characterSize.height+"px",b.backgroundColor=this.cursorColor_,b.borderBottomStyle=null,b.borderLeftStyle=null}},z.prototype.scheduleSyncCursorPosition_=function(){if(!this.timeouts_.syncCursor){var a=this;this.timeouts_.syncCursor=setTimeout(function(){a.syncCursorPosition_(),delete a.timeouts_.syncCursor},0)}},z.prototype.showZoomWarning_=function(a){if(!this.zoomWarningNode_){if(!a)return;this.zoomWarningNode_=this.document_.createElement("div"),this.zoomWarningNode_.style.cssText="color: black;background-color: #ff2222;font-size: large;border-radius: 8px;opacity: 0.75;padding: 0.2em 0.5em 0.2em 0.5em;top: 0.5em;right: 1.2em;position: absolute;-webkit-text-size-adjust: none;-webkit-user-select: none;-moz-text-size-adjust: none;-moz-user-select: none;"}this.zoomWarningNode_.textContent=o.msg.zoomWarning,this.zoomWarningNode_.style.fontFamily=this.config.get("font-family"),a?this.zoomWarningNode_.parentNode||this.div_.parentNode.appendChild(this.zoomWarningNode_):this.zoomWarningNode_.parentNode&&this.zoomWarningNode_.parentNode.removeChild(this.zoomWarningNode_)},z.prototype.showOverlay=function(a,b){if(!this.overlayNode_){if(!this.div_)return;this.overlayNode_=this.document_.createElement("div"),this.overlayNode_.style.cssText="border-radius: 15px;font-size: xx-large;opacity: 0.75;padding: 0.2em 0.5em 0.2em 0.5em;position: absolute;-webkit-user-select: none;-webkit-transition: opacity 180ms ease-in;-moz-user-select: none;-moz-transition: opacity 180ms ease-in;",this.overlayNode_.addEventListener("mousedown",function(a){a.preventDefault(),a.stopPropagation()},!0)}this.overlayNode_.style.color=this.config.get("background-color"),this.overlayNode_.style.backgroundColor=this.config.get("foreground-color"),this.overlayNode_.style.fontFamily=this.config.get("font-family"),this.overlayNode_.textContent=a,this.overlayNode_.style.opacity="0.75",this.overlayNode_.parentNode||this.div_.appendChild(this.overlayNode_);var c=r.dom.getClientSize(this.div_),d=r.dom.getClientSize(this.overlayNode_);this.overlayNode_.style.top=(c.height-d.height)/2+"px",this.overlayNode_.style.left=(c.width-d.width-this.scrollPort_.currentScrollbarWidthPx)/2+"px";var e=this;this.overlayTimeout_&&clearTimeout(this.overlayTimeout_),null!==b&&(this.overlayTimeout_=setTimeout(function(){e.overlayNode_.style.opacity="0",e.overlayTimeout_=setTimeout(function(){e.overlayNode_.parentNode&&e.overlayNode_.parentNode.removeChild(e.overlayNode_),e.overlayTimeout_=null,e.overlayNode_.style.opacity="0.75"},200)},b||1500))},z.prototype.paste=function(){r.dom.pasteFromClipboard(this.document_)},z.prototype.copyStringToClipboard=function(a){this.config.get("enable-clipboard-notice")&&setTimeout(this.showOverlay.bind(this,o.msg.notifyCopy,500),200);var b=this.document_.createElement("pre");b.textContent=a,b.style.cssText="-webkit-user-select: text;-moz-user-select: text;position: absolute;top: -99px",this.document_.body.appendChild(b);var c=this.document_.getSelection(),d=c.anchorNode,e=c.anchorOffset,f=c.focusNode,g=c.focusOffset;c.selectAllChildren(b),r.dom.copySelectionToClipboard(this.document_),c.extend&&(c.collapse(d,e),c.extend(f,g)),b.parentNode.removeChild(b)},z.prototype.getSelectionText=function(){var a=this.scrollPort_.selection;if(a.sync(),a.isCollapsed)return null;var b=a.startOffset,c=a.startNode;if("X-ROW"!=c.nodeName)for("#text"==c.nodeName&&"SPAN"==c.parentNode.nodeName&&(c=c.parentNode);c.previousSibling;)c=c.previousSibling,b+=x.nodeWidth(c);var d=x.nodeWidth(a.endNode)-a.endOffset;if(c=a.endNode,"X-ROW"!=c.nodeName)for("#text"==c.nodeName&&"SPAN"==c.parentNode.nodeName&&(c=c.parentNode);c.nextSibling;)c=c.nextSibling,d+=x.nodeWidth(c);var e=this.getRowsText(a.startRow.rowIndex,a.endRow.rowIndex+1);return o.wc.substring(e,b,o.wc.strWidth(e)-d)},z.prototype.copySelectionToClipboard=function(){var a=this.getSelectionText();null!=a&&this.copyStringToClipboard(a)},z.prototype.overlaySize=function(){this.showOverlay(this.screenSize.width+"x"+this.screenSize.height)},z.prototype.onVTKeystroke=function(a){this.scrollOnKeystroke_&&this.scrollPort_.scrollRowToBottom(this.getRowCount()),this.io.onVTKeystroke(this.keyboard.encode(a))},z.prototype.onMouse_=function(a){a.processedByTerminalHandler_||(a.processedByTerminalHandler_=!0,a.terminalRow=parseInt((a.clientY-this.scrollPort_.visibleRowTopMargin)/this.scrollPort_.characterSize.height)+1,a.terminalColumn=parseInt(a.clientX/this.scrollPort_.characterSize.width)+1,"mousedown"==a.type&&a.terminalColumn>this.screenSize.width||(this.options_.cursorVisible&&this.vt.mouseReport==this.vt.MOUSE_REPORT_DISABLED&&(a.terminalRow-1==this.screen_.cursorPosition.row&&a.terminalColumn-1==this.screen_.cursorPosition.column?this.cursorNode_.style.display="none":"none"==this.cursorNode_.style.display&&(this.cursorNode_.style.display="")),"mousedown"==a.type&&(a.altKey||this.vt.mouseReport==this.vt.MOUSE_REPORT_DISABLED?(this.reportMouseEvents_=!1,this.setSelectionEnabled(!0)):(this.reportMouseEvents_=!0,this.document_.getSelection().collapseToEnd(),this.setSelectionEnabled(!1),a.preventDefault())),this.reportMouseEvents_?(this.scrollBlockerNode_.engaged||("mousedown"==a.type?(this.scrollBlockerNode_.engaged=!0,this.scrollBlockerNode_.style.top=a.clientY-5+"px",this.scrollBlockerNode_.style.left=a.clientX-5+"px"):"mousemove"==a.type&&(this.document_.getSelection().collapseToEnd(),a.preventDefault())),this.onMouse(a)):("dblclick"==a.type&&(this.screen_.expandSelection(this.document_.getSelection()),r.dom.copySelectionToClipboard(this.document_)),"mousedown"==a.type&&a.which==this.mousePasteButton&&this.paste(),"mouseup"==a.type&&1==a.which&&this.copyOnSelect&&!this.document_.getSelection().isCollapsed&&r.dom.copySelectionToClipboard(this.document_),"mousemove"!=a.type&&"mouseup"!=a.type||!this.scrollBlockerNode_.engaged||(this.scrollBlockerNode_.engaged=!1,this.scrollBlockerNode_.style.top="-99px")),"mouseup"==a.type&&this.document_.getSelection().isCollapsed&&(this.reportMouseEvents_=this.vt.mouseReport!=this.vt.MOUSE_REPORT_DISABLED)))},z.prototype.onMouse=function(){},z.prototype.onFocusChange_=function(a){this.cursorNode_.setAttribute("focus",a),this.restyleCursor_(),a===!0&&this.closeBellNotifications_()},z.prototype.onScroll_=function(){this.scheduleSyncCursorPosition_()},z.prototype.onPaste_=function(a){var b=a.text.replace(/\n/gm,"\r");b=this.keyboard.encode(b),this.options_.bracketedPaste&&(b="[200~"+b+"[201~"),this.io.sendString(b)},z.prototype.onCopy_=function(a){this.useDefaultWindowCopy||(a.preventDefault(),setTimeout(this.copySelectionToClipboard.bind(this),0))},z.prototype.onResize_=function(){var a=Math.floor(this.scrollPort_.getScreenWidth()/this.scrollPort_.characterSize.width),b=Math.floor(this.scrollPort_.getScreenHeight()/this.scrollPort_.characterSize.height);if(!(0>=a||0>=b)){var c=a!=this.screenSize.width||b!=this.screenSize.height;this.realizeSize_(a,b),this.showZoomWarning_(1!=this.scrollPort_.characterSize.zoomFactor),c&&this.overlaySize(),this.restyleCursor_(),this.scheduleSyncCursorPosition_()}},z.prototype.onCursorBlink_=function(){return this.options_.cursorBlink?void("false"==this.cursorNode_.getAttribute("focus")||"0"==this.cursorNode_.style.opacity?(this.cursorNode_.style.opacity="1",this.timeouts_.cursorBlink=setTimeout(this.myOnCursorBlink_,this.cursorBlinkCycle_[0])):(this.cursorNode_.style.opacity="0",this.timeouts_.cursorBlink=setTimeout(this.myOnCursorBlink_,this.cursorBlinkCycle_[1]))):void delete this.timeouts_.cursorBlink},z.prototype.setScrollbarVisible=function(a){this.scrollPort_.setScrollbarVisible(a)},z.prototype.closeBellNotifications_=function(){this.bellNotificationList_.forEach(function(a){a.close()}),this.bellNotificationList_.length=0}}),define("hterm/terminal_config_observers",["hterm/util","hterm/i18n","exports"],function(a,b,c){"use strict";var d=a["default"],e=b["default"],f={"alt-backspace-is-meta-backspace":function(a){this.keyboard.altBackspaceIsMetaBackspace=a},"alt-is-meta":function(a){this.keyboard.altIsMeta=a},"alt-sends-what":function(a){/^(escape|8-bit|browser-key)$/.test(a)||(a="escape"),this.keyboard.altSendsWhat=a},"audible-bell-sound":function(){this.syncBellAudio_()
},"desktop-notification-bell":function(a){a&&window.Notification?(this.desktopNotificationBell_="granted"===window.Notification.permission,this.desktopNotificationBell_||console.warn("desktop-notification-bell is true but we do not have permission to display notifications.")):this.desktopNotificationBell_=!1},"background-color":function(a){this.setBackgroundColor(a)},"background-image":function(a){this.scrollPort_.setBackgroundImage(a)},"background-size":function(a){this.scrollPort_.setBackgroundSize(a)},"background-position":function(a){this.scrollPort_.setBackgroundPosition(a)},"backspace-sends-backspace":function(a){this.keyboard.backspaceSendsBackspace=a},"cursor-blink":function(a){this.setCursorBlink(!!a)},"cursor-blink-cycle":function(a){this.cursorBlinkCycle_=a instanceof Array&&"number"==typeof a[0]&&"number"==typeof a[1]?a:"number"==typeof a?[a,a]:[100,100]},"cursor-color":function(a){this.setCursorColor(a)},"color-palette-overrides":function(a){if(!(null==a||a instanceof Object||a instanceof Array))return void console.warn("Preference color-palette-overrides is not an array or object: "+a);if(d.colors.colorPalette=d.colors.stockColorPalette.concat(),a)for(var b in a){var c=parseInt(b);if(isNaN(c)||0>c||c>255)console.log("Invalid value in palette: "+b+": "+a[b]);else if(a[c]){var e=d.colors.normalizeCSS(a[c]);e&&(d.colors.colorPalette[c]=e)}}this.primaryScreen_.textAttributes.resetColorPalette(),this.alternateScreen_.textAttributes.resetColorPalette()},"copy-on-select":function(a){this.copyOnSelect=!!a},"use-default-window-copy":function(a){this.useDefaultWindowCopy=!!a},"clear-selection-after-copy":function(a){this.clearSelectionAfterCopy=!!a},"ctrl-plus-minus-zero-zoom":function(a){this.keyboard.ctrlPlusMinusZeroZoom=a},"ctrl-c-copy":function(a){this.keyboard.ctrlCCopy=a},"ctrl-v-paste":function(a){this.keyboard.ctrlVPaste=a,this.scrollPort_.setCtrlVPaste(a)},"east-asian-ambiguous-as-two-column":function(a){e.wc.regardCjkAmbiguous=a},"enable-8-bit-control":function(a){this.vt.enable8BitControl=!!a},"enable-bold":function(a){this.setBoldSafeState(a)},"enable-bold-as-bright":function(a){this.primaryScreen_.textAttributes.enableBoldAsBright=!!a,this.alternateScreen_.textAttributes.enableBoldAsBright=!!a},"enable-clipboard-write":function(a){this.vt.enableClipboardWrite=!!a},"enable-dec12":function(a){this.vt.enableDec12=!!a},"font-family":function(a){this.setFontFamily(a)},"font-size":function(a){this.setFontSize(a)},"font-smoothing":function(a){this.setFontSmoothing(a)},"foreground-color":function(a){this.setForegroundColor(a)},"home-keys-scroll":function(a){this.keyboard.homeKeysScroll=a},"max-string-sequence":function(a){this.vt.maxStringSequence=a},"media-keys-are-fkeys":function(a){this.keyboard.mediaKeysAreFKeys=a},"meta-sends-escape":function(a){this.keyboard.metaSendsEscape=a},"mouse-paste-button":function(a){this.setMousePasteButton(a)},"page-keys-scroll":function(a){this.keyboard.pageKeysScroll=a},"pass-alt-number":function(a){this.passAltNumber=a},"pass-ctrl-number":function(a){this.passCtrlNumber=a},"pass-meta-number":function(a){this.passMetaNumber=a},"pass-meta-v":function(a){this.keyboard.passMetaV=a},"receive-encoding":function(a){/^(utf-8|raw)$/.test(a)||(console.warn('Invalid value for "receive-encoding": '+a),a="utf-8"),this.vt.characterEncoding=a},"scroll-on-keystroke":function(a){this.scrollOnKeystroke_=a},"scroll-on-output":function(a){this.scrollOnOutput_=a},"scrollbar-visible":function(a){this.setScrollbarVisible(a)},"send-encoding":function(a){/^(utf-8|raw)$/.test(a)||(console.warn('Invalid value for "send-encoding": '+a),a="utf-8"),this.keyboard.characterEncoding=a},"shift-insert-paste":function(a){this.keyboard.shiftInsertPaste=a},"user-css":function(a){this.scrollPort_.setUserCss(a)}};c.terminalConfigObservers=f,c["default"]=f}),define("hterm/terminal_io",["hterm/i18n/utf8","exports"],function(a,b){"use strict";var c=a["default"],d=function(a){this.terminal_=a,this.previousIO_=null};b.TerminalIO=d,b["default"]=d,d.prototype.showOverlay=function(a,b){this.terminal_.showOverlay(a,b)},d.prototype.setTerminalProfile=function(a){this.terminal_.setProfile(a)},d.prototype.push=function(){var a=new d(this.terminal_);return a.keyboardCaptured_=this.keyboardCaptured_,a.columnCount=this.columnCount,a.rowCount=this.rowCount,a.previousIO_=this.terminal_.io,this.terminal_.io=a,a},d.prototype.pop=function(){this.terminal_.io=this.previousIO_},d.prototype.sendString=function(a){console.log("Unhandled sendString: "+a)},d.prototype.onVTKeystroke=function(a){console.log("Unobserverd VT keystroke: "+JSON.stringify(a))},d.prototype.onTerminalResize_=function(a,b){for(var c=this;c;)c.columnCount=a,c.rowCount=b,c=c.previousIO_;this.onTerminalResize(a,b)},d.prototype.onTerminalResize=function(){},d.prototype.writeUTF8=function(a){if(this.terminal_.io!=this)throw"Attempt to print from inactive IO object.";this.terminal_.interpret(a)},d.prototype.writelnUTF8=function(a){if(this.terminal_.io!=this)throw"Attempt to print from inactive IO object.";this.terminal_.interpret(a+"\r\n")},d.prototype.print=d.prototype.writeUTF16=function(a){this.writeUTF8(c.encode(a))},d.prototype.println=d.prototype.writelnUTF16=function(a){this.writelnUTF8(c.encode(a))}}),define("hterm/text_attributes",["hterm/i18n","hterm/util","exports"],function(a,b,c){"use strict";var d=a["default"],e=b["default"],f=function(a){this.document_=a,this.foregroundSource=this.SRC_DEFAULT,this.backgroundSource=this.SRC_DEFAULT,this.foreground=this.DEFAULT_COLOR,this.background=this.DEFAULT_COLOR,this.defaultForeground="rgb(255, 255, 255)",this.defaultBackground="rgb(0, 0, 0)",this.bold=!1,this.italic=!1,this.blink=!1,this.underline=!1,this.inverse=!1,this.invisible=!1,this.wcNode=!1,this.tileData=null,this.colorPalette=null,this.resetColorPalette()};c.TextAttributes=f,c["default"]=f,f.prototype.enableBold=!0,f.prototype.enableBoldAsBright=!0,f.prototype.DEFAULT_COLOR=new String(""),f.prototype.SRC_DEFAULT="default",f.prototype.SRC_RGB="rgb",f.prototype.setDocument=function(a){this.document_=a},f.prototype.clone=function(){var a=new f(null);for(var b in this)a[b]=this[b];return a.colorPalette=this.colorPalette.concat(),a},f.prototype.reset=function(){this.foregroundSource=this.SRC_DEFAULT,this.backgroundSource=this.SRC_DEFAULT,this.foreground=this.DEFAULT_COLOR,this.background=this.DEFAULT_COLOR,this.bold=!1,this.italic=!1,this.blink=!1,this.underline=!1,this.inverse=!1,this.invisible=!1,this.wcNode=!1},f.prototype.resetColorPalette=function(){this.colorPalette=e.colors.colorPalette.concat(),this.syncColors()},f.prototype.isDefault=function(){return!(this.foregroundSource!=this.SRC_DEFAULT||this.backgroundSource!=this.SRC_DEFAULT||this.bold||this.italic||this.blink||this.underline||this.inverse||this.invisible||this.wcNode||null!=this.tileData)},f.prototype.createContainer=function(a){if(this.isDefault())return this.document_.createTextNode(a);var b=this.document_.createElement("span"),c=b.style;return this.foreground!=this.DEFAULT_COLOR&&(c.color=this.foreground),this.background!=this.DEFAULT_COLOR&&(c.backgroundColor=this.background),this.enableBold&&this.bold&&(c.fontWeight="bold"),this.italic&&(c.fontStyle="italic"),this.blink&&(c.fontStyle="italic"),this.underline&&(c.textDecoration="underline"),this.wcNode&&(b.className="wc-node",b.wcNode=!0),null!=this.tileData&&(b.className+=" tile tile_"+this.tileData,b.tileNode=!0),a&&(b.textContent=a),b},f.prototype.matchesContainer=function(a){if("string"==typeof a||3==a.nodeType)return this.isDefault();var b=a.style;return!(this.wcNode||a.wcNode||null!=this.tileData||a.tileNode||this.foreground!=b.color||this.background!=b.backgroundColor||(this.enableBold&&this.bold)!=!!b.fontWeight||(this.blink||this.italic)!=!!b.fontStyle||this.underline!=!!b.textDecoration)},f.prototype.setDefaults=function(a,b){this.defaultForeground=a,this.defaultBackground=b,this.syncColors()},f.prototype.syncColors=function(){function a(a){return 8>a?a+8:a}var b=this.foregroundSource,c=this.backgroundSource,d=this.DEFAULT_COLOR,e=this.DEFAULT_COLOR;this.inverse&&(b=this.backgroundSource,c=this.foregroundSource,d=this.defaultBackground,e=this.defaultForeground),this.enableBoldAsBright&&this.bold&&b!=this.SRC_DEFAULT&&b!=this.SRC_RGB&&(b=a(b)),this.invisible&&(b=c),b!=this.SRC_RGB&&(this.foreground=b==this.SRC_DEFAULT?d:this.colorPalette[b]),c!=this.SRC_RGB&&(this.background=c==this.SRC_DEFAULT?e:this.colorPalette[c])},f.containersMatch=function(a,b){if("string"==typeof a)return f.containerIsDefault(b);if(a.nodeType!=b.nodeType)return!1;if(3==a.nodeType)return!0;var c=a.style,d=b.style;return c.color==d.color&&c.backgroundColor==d.backgroundColor&&c.fontWeight==d.fontWeight&&c.fontStyle==d.fontStyle&&c.textDecoration==d.textDecoration},f.containerIsDefault=function(a){return"string"==typeof a||3==a.nodeType},f.nodeWidth=function(a){return a.wcNode?d.wc.strWidth(a.textContent):a.textContent.length},f.nodeSubstr=function(a,b,c){return a.wcNode?d.wc.substr(a.textContent,b,c):a.textContent.substr(b,c)},f.nodeSubstring=function(a,b,c){return a.wcNode?d.wc.substring(a.textContent,b,c):a.textContent.substring(b,c)},f.splitWidecharString=function(a){for(var b=[],c=0,e=0,f=0;f<a.length;f++){var g=a.charCodeAt(f);128>g||1==d.wc.charWidth(g)?e++:(e&&b.push({str:a.substr(c,e)}),b.push({str:a.substr(f,1),wcNode:!0}),c=f+1,e=0)}return e&&b.push({str:a.substr(c,e)}),b}}),define("hterm/util",["hterm/util/colors","hterm/util/dom","hterm/util/f","hterm/util/pubsub","hterm/util/string","exports"],function(a,b,c,d,e,f){"use strict";var g=a["default"],h=b["default"],i=c["default"],j=d["default"],k=e["default"],l={colors:g,dom:h,f:i,PubSub:j,string:k};f.util=l,f["default"]=l}),define("hterm/util/colors",["exports"],function(a){"use strict";var b={};a.colors=b,a["default"]=b,b.re_={hex16:/#([a-f0-9])([a-f0-9])([a-f0-9])/i,hex24:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/i,rgb:new RegExp("^/s*rgb/s*/(/s*(/d{1,3})/s*,/s*(/d{1,3})/s*,/s*(/d{1,3})/s*/)/s*$".replace(/\//g,"\\"),"i"),rgba:new RegExp("^/s*rgba/s*/(/s*(/d{1,3})/s*,/s*(/d{1,3})/s*,/s*(/d{1,3})/s*(?:,/s*(/d+(?:/./d+)?)/s*)/)/s*$".replace(/\//g,"\\"),"i"),rgbx:new RegExp("^/s*rgba?/s*/(/s*(/d{1,3})/s*,/s*(/d{1,3})/s*,/s*(/d{1,3})/s*(?:,/s*(/d+(?:/./d+)?)/s*)?/)/s*$".replace(/\//g,"\\"),"i"),x11rgb:/^\s*rgb:([a-f0-9]{1,4})\/([a-f0-9]{1,4})\/([a-f0-9]{1,4})\s*$/i,name:/[a-z][a-z0-9\s]+/},b.rgbToX11=function(a){function c(a){for(a=(257*Math.min(a,255)).toString(16);a.length<4;)a="0"+a;return a}var d=a.match(b.re_.rgbx);return d?"rgb:"+c(d[1])+"/"+c(d[2])+"/"+c(d[3]):null},b.x11ToCSS=function(a){function c(a){return 1==a.length?parseInt(a+a,16):2==a.length?parseInt(a,16):(3==a.length&&(a+=a.substr(2)),Math.round(parseInt(a,16)/257))}var d=a.match(b.re_.x11rgb);return d?(d.splice(0,1),b.arrayToRGBA(d.map(c))):b.nameToRGB(a)},b.hexToRGB=function(a){function c(a){var c=4==a.length?b.re_.hex16:b.re_.hex24,d=a.match(c);return d?"rgb("+parseInt(d[1],16)+", "+parseInt(d[2],16)+", "+parseInt(d[3],16)+")":null}if(a instanceof Array)for(var d=0;d<a.length;d++)a[d]=c(a[d]);else a=c(a);return a},b.rgbToHex=function(a){function c(a){var c=b.crackRGB(a);return"#"+(parseInt(c[0])<<16|parseInt(c[1])<<8|parseInt(c[2])<<0).toString(16)}if(a instanceof Array)for(var d=0;d<a.length;d++)a[d]=c(a[d]);else a=c(a);return a},b.normalizeCSS=function(a){return"#"==a.substr(0,1)?b.hexToRGB(a):b.re_.rgbx.test(a)?a:b.nameToRGB(a)},b.arrayToRGBA=function(a){var b=a.length>3?a[3]:1;return"rgba("+a[0]+", "+a[1]+", "+a[2]+", "+b+")"},b.setAlpha=function(a,c){var d=b.crackRGB(a);return d[3]=c,b.arrayToRGBA(d)},b.mix=function(a,c,d){for(var e=b.crackRGB(a),f=b.crackRGB(c),g=0;4>g;++g){var h=e[g]-f[g];e[g]+=h*d}return b.arrayToRGBA(e)},b.crackRGB=function(a){var c;if("rgba"==a.substr(0,4)){if(c=a.match(b.re_.rgba))return c.shift(),c}else if(c=a.match(b.re_.rgb))return c.shift(),c.push(1),c;return console.error("Couldn't crack: "+a),null},b.nameToRGB=function(a){return a in b.colorNames?b.colorNames[a]:(a=a.toLowerCase(),a in b.colorNames?b.colorNames[a]:(a=a.replace(/\s+/g,""),a in b.colorNames?b.colorNames[a]:null))},b.stockColorPalette=b.hexToRGB(["#000000","#CC0000","#4E9A06","#C4A000","#3465A4","#75507B","#06989A","#D3D7CF","#555753","#EF2929","#00BA13","#FCE94F","#729FCF","#F200CB","#00B5BD","#EEEEEC","#000000","#00005F","#000087","#0000AF","#0000D7","#0000FF","#005F00","#005F5F","#005F87","#005FAF","#005FD7","#005FFF","#008700","#00875F","#008787","#0087AF","#0087D7","#0087FF","#00AF00","#00AF5F","#00AF87","#00AFAF","#00AFD7","#00AFFF","#00D700","#00D75F","#00D787","#00D7AF","#00D7D7","#00D7FF","#00FF00","#00FF5F","#00FF87","#00FFAF","#00FFD7","#00FFFF","#5F0000","#5F005F","#5F0087","#5F00AF","#5F00D7","#5F00FF","#5F5F00","#5F5F5F","#5F5F87","#5F5FAF","#5F5FD7","#5F5FFF","#5F8700","#5F875F","#5F8787","#5F87AF","#5F87D7","#5F87FF","#5FAF00","#5FAF5F","#5FAF87","#5FAFAF","#5FAFD7","#5FAFFF","#5FD700","#5FD75F","#5FD787","#5FD7AF","#5FD7D7","#5FD7FF","#5FFF00","#5FFF5F","#5FFF87","#5FFFAF","#5FFFD7","#5FFFFF","#870000","#87005F","#870087","#8700AF","#8700D7","#8700FF","#875F00","#875F5F","#875F87","#875FAF","#875FD7","#875FFF","#878700","#87875F","#878787","#8787AF","#8787D7","#8787FF","#87AF00","#87AF5F","#87AF87","#87AFAF","#87AFD7","#87AFFF","#87D700","#87D75F","#87D787","#87D7AF","#87D7D7","#87D7FF","#87FF00","#87FF5F","#87FF87","#87FFAF","#87FFD7","#87FFFF","#AF0000","#AF005F","#AF0087","#AF00AF","#AF00D7","#AF00FF","#AF5F00","#AF5F5F","#AF5F87","#AF5FAF","#AF5FD7","#AF5FFF","#AF8700","#AF875F","#AF8787","#AF87AF","#AF87D7","#AF87FF","#AFAF00","#AFAF5F","#AFAF87","#AFAFAF","#AFAFD7","#AFAFFF","#AFD700","#AFD75F","#AFD787","#AFD7AF","#AFD7D7","#AFD7FF","#AFFF00","#AFFF5F","#AFFF87","#AFFFAF","#AFFFD7","#AFFFFF","#D70000","#D7005F","#D70087","#D700AF","#D700D7","#D700FF","#D75F00","#D75F5F","#D75F87","#D75FAF","#D75FD7","#D75FFF","#D78700","#D7875F","#D78787","#D787AF","#D787D7","#D787FF","#D7AF00","#D7AF5F","#D7AF87","#D7AFAF","#D7AFD7","#D7AFFF","#D7D700","#D7D75F","#D7D787","#D7D7AF","#D7D7D7","#D7D7FF","#D7FF00","#D7FF5F","#D7FF87","#D7FFAF","#D7FFD7","#D7FFFF","#FF0000","#FF005F","#FF0087","#FF00AF","#FF00D7","#FF00FF","#FF5F00","#FF5F5F","#FF5F87","#FF5FAF","#FF5FD7","#FF5FFF","#FF8700","#FF875F","#FF8787","#FF87AF","#FF87D7","#FF87FF","#FFAF00","#FFAF5F","#FFAF87","#FFAFAF","#FFAFD7","#FFAFFF","#FFD700","#FFD75F","#FFD787","#FFD7AF","#FFD7D7","#FFD7FF","#FFFF00","#FFFF5F","#FFFF87","#FFFFAF","#FFFFD7","#FFFFFF","#080808","#121212","#1C1C1C","#262626","#303030","#3A3A3A","#444444","#4E4E4E","#585858","#626262","#6C6C6C","#767676","#808080","#8A8A8A","#949494","#9E9E9E","#A8A8A8","#B2B2B2","#BCBCBC","#C6C6C6","#D0D0D0","#DADADA","#E4E4E4","#EEEEEE"]),b.colorPalette=b.stockColorPalette,b.colorNames={aliceblue:"rgb(240, 248, 255)",antiquewhite:"rgb(250, 235, 215)",antiquewhite1:"rgb(255, 239, 219)",antiquewhite2:"rgb(238, 223, 204)",antiquewhite3:"rgb(205, 192, 176)",antiquewhite4:"rgb(139, 131, 120)",aquamarine:"rgb(127, 255, 212)",aquamarine1:"rgb(127, 255, 212)",aquamarine2:"rgb(118, 238, 198)",aquamarine3:"rgb(102, 205, 170)",aquamarine4:"rgb(69, 139, 116)",azure:"rgb(240, 255, 255)",azure1:"rgb(240, 255, 255)",azure2:"rgb(224, 238, 238)",azure3:"rgb(193, 205, 205)",azure4:"rgb(131, 139, 139)",beige:"rgb(245, 245, 220)",bisque:"rgb(255, 228, 196)",bisque1:"rgb(255, 228, 196)",bisque2:"rgb(238, 213, 183)",bisque3:"rgb(205, 183, 158)",bisque4:"rgb(139, 125, 107)",black:"rgb(0, 0, 0)",blanchedalmond:"rgb(255, 235, 205)",blue:"rgb(0, 0, 255)",blue1:"rgb(0, 0, 255)",blue2:"rgb(0, 0, 238)",blue3:"rgb(0, 0, 205)",blue4:"rgb(0, 0, 139)",blueviolet:"rgb(138, 43, 226)",brown:"rgb(165, 42, 42)",brown1:"rgb(255, 64, 64)",brown2:"rgb(238, 59, 59)",brown3:"rgb(205, 51, 51)",brown4:"rgb(139, 35, 35)",burlywood:"rgb(222, 184, 135)",burlywood1:"rgb(255, 211, 155)",burlywood2:"rgb(238, 197, 145)",burlywood3:"rgb(205, 170, 125)",burlywood4:"rgb(139, 115, 85)",cadetblue:"rgb(95, 158, 160)",cadetblue1:"rgb(152, 245, 255)",cadetblue2:"rgb(142, 229, 238)",cadetblue3:"rgb(122, 197, 205)",cadetblue4:"rgb(83, 134, 139)",chartreuse:"rgb(127, 255, 0)",chartreuse1:"rgb(127, 255, 0)",chartreuse2:"rgb(118, 238, 0)",chartreuse3:"rgb(102, 205, 0)",chartreuse4:"rgb(69, 139, 0)",chocolate:"rgb(210, 105, 30)",chocolate1:"rgb(255, 127, 36)",chocolate2:"rgb(238, 118, 33)",chocolate3:"rgb(205, 102, 29)",chocolate4:"rgb(139, 69, 19)",coral:"rgb(255, 127, 80)",coral1:"rgb(255, 114, 86)",coral2:"rgb(238, 106, 80)",coral3:"rgb(205, 91, 69)",coral4:"rgb(139, 62, 47)",cornflowerblue:"rgb(100, 149, 237)",cornsilk:"rgb(255, 248, 220)",cornsilk1:"rgb(255, 248, 220)",cornsilk2:"rgb(238, 232, 205)",cornsilk3:"rgb(205, 200, 177)",cornsilk4:"rgb(139, 136, 120)",cyan:"rgb(0, 255, 255)",cyan1:"rgb(0, 255, 255)",cyan2:"rgb(0, 238, 238)",cyan3:"rgb(0, 205, 205)",cyan4:"rgb(0, 139, 139)",darkblue:"rgb(0, 0, 139)",darkcyan:"rgb(0, 139, 139)",darkgoldenrod:"rgb(184, 134, 11)",darkgoldenrod1:"rgb(255, 185, 15)",darkgoldenrod2:"rgb(238, 173, 14)",darkgoldenrod3:"rgb(205, 149, 12)",darkgoldenrod4:"rgb(139, 101, 8)",darkgray:"rgb(169, 169, 169)",darkgreen:"rgb(0, 100, 0)",darkgrey:"rgb(169, 169, 169)",darkkhaki:"rgb(189, 183, 107)",darkmagenta:"rgb(139, 0, 139)",darkolivegreen:"rgb(85, 107, 47)",darkolivegreen1:"rgb(202, 255, 112)",darkolivegreen2:"rgb(188, 238, 104)",darkolivegreen3:"rgb(162, 205, 90)",darkolivegreen4:"rgb(110, 139, 61)",darkorange:"rgb(255, 140, 0)",darkorange1:"rgb(255, 127, 0)",darkorange2:"rgb(238, 118, 0)",darkorange3:"rgb(205, 102, 0)",darkorange4:"rgb(139, 69, 0)",darkorchid:"rgb(153, 50, 204)",darkorchid1:"rgb(191, 62, 255)",darkorchid2:"rgb(178, 58, 238)",darkorchid3:"rgb(154, 50, 205)",darkorchid4:"rgb(104, 34, 139)",darkred:"rgb(139, 0, 0)",darksalmon:"rgb(233, 150, 122)",darkseagreen:"rgb(143, 188, 143)",darkseagreen1:"rgb(193, 255, 193)",darkseagreen2:"rgb(180, 238, 180)",darkseagreen3:"rgb(155, 205, 155)",darkseagreen4:"rgb(105, 139, 105)",darkslateblue:"rgb(72, 61, 139)",darkslategray:"rgb(47, 79, 79)",darkslategray1:"rgb(151, 255, 255)",darkslategray2:"rgb(141, 238, 238)",darkslategray3:"rgb(121, 205, 205)",darkslategray4:"rgb(82, 139, 139)",darkslategrey:"rgb(47, 79, 79)",darkturquoise:"rgb(0, 206, 209)",darkviolet:"rgb(148, 0, 211)",debianred:"rgb(215, 7, 81)",deeppink:"rgb(255, 20, 147)",deeppink1:"rgb(255, 20, 147)",deeppink2:"rgb(238, 18, 137)",deeppink3:"rgb(205, 16, 118)",deeppink4:"rgb(139, 10, 80)",deepskyblue:"rgb(0, 191, 255)",deepskyblue1:"rgb(0, 191, 255)",deepskyblue2:"rgb(0, 178, 238)",deepskyblue3:"rgb(0, 154, 205)",deepskyblue4:"rgb(0, 104, 139)",dimgray:"rgb(105, 105, 105)",dimgrey:"rgb(105, 105, 105)",dodgerblue:"rgb(30, 144, 255)",dodgerblue1:"rgb(30, 144, 255)",dodgerblue2:"rgb(28, 134, 238)",dodgerblue3:"rgb(24, 116, 205)",dodgerblue4:"rgb(16, 78, 139)",firebrick:"rgb(178, 34, 34)",firebrick1:"rgb(255, 48, 48)",firebrick2:"rgb(238, 44, 44)",firebrick3:"rgb(205, 38, 38)",firebrick4:"rgb(139, 26, 26)",floralwhite:"rgb(255, 250, 240)",forestgreen:"rgb(34, 139, 34)",gainsboro:"rgb(220, 220, 220)",ghostwhite:"rgb(248, 248, 255)",gold:"rgb(255, 215, 0)",gold1:"rgb(255, 215, 0)",gold2:"rgb(238, 201, 0)",gold3:"rgb(205, 173, 0)",gold4:"rgb(139, 117, 0)",goldenrod:"rgb(218, 165, 32)",goldenrod1:"rgb(255, 193, 37)",goldenrod2:"rgb(238, 180, 34)",goldenrod3:"rgb(205, 155, 29)",goldenrod4:"rgb(139, 105, 20)",gray:"rgb(190, 190, 190)",gray0:"rgb(0, 0, 0)",gray1:"rgb(3, 3, 3)",gray10:"rgb(26, 26, 26)",gray100:"rgb(255, 255, 255)",gray11:"rgb(28, 28, 28)",gray12:"rgb(31, 31, 31)",gray13:"rgb(33, 33, 33)",gray14:"rgb(36, 36, 36)",gray15:"rgb(38, 38, 38)",gray16:"rgb(41, 41, 41)",gray17:"rgb(43, 43, 43)",gray18:"rgb(46, 46, 46)",gray19:"rgb(48, 48, 48)",gray2:"rgb(5, 5, 5)",gray20:"rgb(51, 51, 51)",gray21:"rgb(54, 54, 54)",gray22:"rgb(56, 56, 56)",gray23:"rgb(59, 59, 59)",gray24:"rgb(61, 61, 61)",gray25:"rgb(64, 64, 64)",gray26:"rgb(66, 66, 66)",gray27:"rgb(69, 69, 69)",gray28:"rgb(71, 71, 71)",gray29:"rgb(74, 74, 74)",gray3:"rgb(8, 8, 8)",gray30:"rgb(77, 77, 77)",gray31:"rgb(79, 79, 79)",gray32:"rgb(82, 82, 82)",gray33:"rgb(84, 84, 84)",gray34:"rgb(87, 87, 87)",gray35:"rgb(89, 89, 89)",gray36:"rgb(92, 92, 92)",gray37:"rgb(94, 94, 94)",gray38:"rgb(97, 97, 97)",gray39:"rgb(99, 99, 99)",gray4:"rgb(10, 10, 10)",gray40:"rgb(102, 102, 102)",gray41:"rgb(105, 105, 105)",gray42:"rgb(107, 107, 107)",gray43:"rgb(110, 110, 110)",gray44:"rgb(112, 112, 112)",gray45:"rgb(115, 115, 115)",gray46:"rgb(117, 117, 117)",gray47:"rgb(120, 120, 120)",gray48:"rgb(122, 122, 122)",gray49:"rgb(125, 125, 125)",gray5:"rgb(13, 13, 13)",gray50:"rgb(127, 127, 127)",gray51:"rgb(130, 130, 130)",gray52:"rgb(133, 133, 133)",gray53:"rgb(135, 135, 135)",gray54:"rgb(138, 138, 138)",gray55:"rgb(140, 140, 140)",gray56:"rgb(143, 143, 143)",gray57:"rgb(145, 145, 145)",gray58:"rgb(148, 148, 148)",gray59:"rgb(150, 150, 150)",gray6:"rgb(15, 15, 15)",gray60:"rgb(153, 153, 153)",gray61:"rgb(156, 156, 156)",gray62:"rgb(158, 158, 158)",gray63:"rgb(161, 161, 161)",gray64:"rgb(163, 163, 163)",gray65:"rgb(166, 166, 166)",gray66:"rgb(168, 168, 168)",gray67:"rgb(171, 171, 171)",gray68:"rgb(173, 173, 173)",gray69:"rgb(176, 176, 176)",gray7:"rgb(18, 18, 18)",gray70:"rgb(179, 179, 179)",gray71:"rgb(181, 181, 181)",gray72:"rgb(184, 184, 184)",gray73:"rgb(186, 186, 186)",gray74:"rgb(189, 189, 189)",gray75:"rgb(191, 191, 191)",gray76:"rgb(194, 194, 194)",gray77:"rgb(196, 196, 196)",gray78:"rgb(199, 199, 199)",gray79:"rgb(201, 201, 201)",gray8:"rgb(20, 20, 20)",gray80:"rgb(204, 204, 204)",gray81:"rgb(207, 207, 207)",gray82:"rgb(209, 209, 209)",gray83:"rgb(212, 212, 212)",gray84:"rgb(214, 214, 214)",gray85:"rgb(217, 217, 217)",gray86:"rgb(219, 219, 219)",gray87:"rgb(222, 222, 222)",gray88:"rgb(224, 224, 224)",gray89:"rgb(227, 227, 227)",gray9:"rgb(23, 23, 23)",gray90:"rgb(229, 229, 229)",gray91:"rgb(232, 232, 232)",gray92:"rgb(235, 235, 235)",gray93:"rgb(237, 237, 237)",gray94:"rgb(240, 240, 240)",gray95:"rgb(242, 242, 242)",gray96:"rgb(245, 245, 245)",gray97:"rgb(247, 247, 247)",gray98:"rgb(250, 250, 250)",gray99:"rgb(252, 252, 252)",green:"rgb(0, 255, 0)",green1:"rgb(0, 255, 0)",green2:"rgb(0, 238, 0)",green3:"rgb(0, 205, 0)",green4:"rgb(0, 139, 0)",greenyellow:"rgb(173, 255, 47)",grey:"rgb(190, 190, 190)",grey0:"rgb(0, 0, 0)",grey1:"rgb(3, 3, 3)",grey10:"rgb(26, 26, 26)",grey100:"rgb(255, 255, 255)",grey11:"rgb(28, 28, 28)",grey12:"rgb(31, 31, 31)",grey13:"rgb(33, 33, 33)",grey14:"rgb(36, 36, 36)",grey15:"rgb(38, 38, 38)",grey16:"rgb(41, 41, 41)",grey17:"rgb(43, 43, 43)",grey18:"rgb(46, 46, 46)",grey19:"rgb(48, 48, 48)",grey2:"rgb(5, 5, 5)",grey20:"rgb(51, 51, 51)",grey21:"rgb(54, 54, 54)",grey22:"rgb(56, 56, 56)",grey23:"rgb(59, 59, 59)",grey24:"rgb(61, 61, 61)",grey25:"rgb(64, 64, 64)",grey26:"rgb(66, 66, 66)",grey27:"rgb(69, 69, 69)",grey28:"rgb(71, 71, 71)",grey29:"rgb(74, 74, 74)",grey3:"rgb(8, 8, 8)",grey30:"rgb(77, 77, 77)",grey31:"rgb(79, 79, 79)",grey32:"rgb(82, 82, 82)",grey33:"rgb(84, 84, 84)",grey34:"rgb(87, 87, 87)",grey35:"rgb(89, 89, 89)",grey36:"rgb(92, 92, 92)",grey37:"rgb(94, 94, 94)",grey38:"rgb(97, 97, 97)",grey39:"rgb(99, 99, 99)",grey4:"rgb(10, 10, 10)",grey40:"rgb(102, 102, 102)",grey41:"rgb(105, 105, 105)",grey42:"rgb(107, 107, 107)",grey43:"rgb(110, 110, 110)",grey44:"rgb(112, 112, 112)",grey45:"rgb(115, 115, 115)",grey46:"rgb(117, 117, 117)",grey47:"rgb(120, 120, 120)",grey48:"rgb(122, 122, 122)",grey49:"rgb(125, 125, 125)",grey5:"rgb(13, 13, 13)",grey50:"rgb(127, 127, 127)",grey51:"rgb(130, 130, 130)",grey52:"rgb(133, 133, 133)",grey53:"rgb(135, 135, 135)",grey54:"rgb(138, 138, 138)",grey55:"rgb(140, 140, 140)",grey56:"rgb(143, 143, 143)",grey57:"rgb(145, 145, 145)",grey58:"rgb(148, 148, 148)",grey59:"rgb(150, 150, 150)",grey6:"rgb(15, 15, 15)",grey60:"rgb(153, 153, 153)",grey61:"rgb(156, 156, 156)",grey62:"rgb(158, 158, 158)",grey63:"rgb(161, 161, 161)",grey64:"rgb(163, 163, 163)",grey65:"rgb(166, 166, 166)",grey66:"rgb(168, 168, 168)",grey67:"rgb(171, 171, 171)",grey68:"rgb(173, 173, 173)",grey69:"rgb(176, 176, 176)",grey7:"rgb(18, 18, 18)",grey70:"rgb(179, 179, 179)",grey71:"rgb(181, 181, 181)",grey72:"rgb(184, 184, 184)",grey73:"rgb(186, 186, 186)",grey74:"rgb(189, 189, 189)",grey75:"rgb(191, 191, 191)",grey76:"rgb(194, 194, 194)",grey77:"rgb(196, 196, 196)",grey78:"rgb(199, 199, 199)",grey79:"rgb(201, 201, 201)",grey8:"rgb(20, 20, 20)",grey80:"rgb(204, 204, 204)",grey81:"rgb(207, 207, 207)",grey82:"rgb(209, 209, 209)",grey83:"rgb(212, 212, 212)",grey84:"rgb(214, 214, 214)",grey85:"rgb(217, 217, 217)",grey86:"rgb(219, 219, 219)",grey87:"rgb(222, 222, 222)",grey88:"rgb(224, 224, 224)",grey89:"rgb(227, 227, 227)",grey9:"rgb(23, 23, 23)",grey90:"rgb(229, 229, 229)",grey91:"rgb(232, 232, 232)",grey92:"rgb(235, 235, 235)",grey93:"rgb(237, 237, 237)",grey94:"rgb(240, 240, 240)",grey95:"rgb(242, 242, 242)",grey96:"rgb(245, 245, 245)",grey97:"rgb(247, 247, 247)",grey98:"rgb(250, 250, 250)",grey99:"rgb(252, 252, 252)",honeydew:"rgb(240, 255, 240)",honeydew1:"rgb(240, 255, 240)",honeydew2:"rgb(224, 238, 224)",honeydew3:"rgb(193, 205, 193)",honeydew4:"rgb(131, 139, 131)",hotpink:"rgb(255, 105, 180)",hotpink1:"rgb(255, 110, 180)",hotpink2:"rgb(238, 106, 167)",hotpink3:"rgb(205, 96, 144)",hotpink4:"rgb(139, 58, 98)",indianred:"rgb(205, 92, 92)",indianred1:"rgb(255, 106, 106)",indianred2:"rgb(238, 99, 99)",indianred3:"rgb(205, 85, 85)",indianred4:"rgb(139, 58, 58)",ivory:"rgb(255, 255, 240)",ivory1:"rgb(255, 255, 240)",ivory2:"rgb(238, 238, 224)",ivory3:"rgb(205, 205, 193)",ivory4:"rgb(139, 139, 131)",khaki:"rgb(240, 230, 140)",khaki1:"rgb(255, 246, 143)",khaki2:"rgb(238, 230, 133)",khaki3:"rgb(205, 198, 115)",khaki4:"rgb(139, 134, 78)",lavender:"rgb(230, 230, 250)",lavenderblush:"rgb(255, 240, 245)",lavenderblush1:"rgb(255, 240, 245)",lavenderblush2:"rgb(238, 224, 229)",lavenderblush3:"rgb(205, 193, 197)",lavenderblush4:"rgb(139, 131, 134)",lawngreen:"rgb(124, 252, 0)",lemonchiffon:"rgb(255, 250, 205)",lemonchiffon1:"rgb(255, 250, 205)",lemonchiffon2:"rgb(238, 233, 191)",lemonchiffon3:"rgb(205, 201, 165)",lemonchiffon4:"rgb(139, 137, 112)",lightblue:"rgb(173, 216, 230)",lightblue1:"rgb(191, 239, 255)",lightblue2:"rgb(178, 223, 238)",lightblue3:"rgb(154, 192, 205)",lightblue4:"rgb(104, 131, 139)",lightcoral:"rgb(240, 128, 128)",lightcyan:"rgb(224, 255, 255)",lightcyan1:"rgb(224, 255, 255)",lightcyan2:"rgb(209, 238, 238)",lightcyan3:"rgb(180, 205, 205)",lightcyan4:"rgb(122, 139, 139)",lightgoldenrod:"rgb(238, 221, 130)",lightgoldenrod1:"rgb(255, 236, 139)",lightgoldenrod2:"rgb(238, 220, 130)",lightgoldenrod3:"rgb(205, 190, 112)",lightgoldenrod4:"rgb(139, 129, 76)",lightgoldenrodyellow:"rgb(250, 250, 210)",lightgray:"rgb(211, 211, 211)",lightgreen:"rgb(144, 238, 144)",lightgrey:"rgb(211, 211, 211)",lightpink:"rgb(255, 182, 193)",lightpink1:"rgb(255, 174, 185)",lightpink2:"rgb(238, 162, 173)",lightpink3:"rgb(205, 140, 149)",lightpink4:"rgb(139, 95, 101)",lightsalmon:"rgb(255, 160, 122)",lightsalmon1:"rgb(255, 160, 122)",lightsalmon2:"rgb(238, 149, 114)",lightsalmon3:"rgb(205, 129, 98)",lightsalmon4:"rgb(139, 87, 66)",lightseagreen:"rgb(32, 178, 170)",lightskyblue:"rgb(135, 206, 250)",lightskyblue1:"rgb(176, 226, 255)",lightskyblue2:"rgb(164, 211, 238)",lightskyblue3:"rgb(141, 182, 205)",lightskyblue4:"rgb(96, 123, 139)",lightslateblue:"rgb(132, 112, 255)",lightslategray:"rgb(119, 136, 153)",lightslategrey:"rgb(119, 136, 153)",lightsteelblue:"rgb(176, 196, 222)",lightsteelblue1:"rgb(202, 225, 255)",lightsteelblue2:"rgb(188, 210, 238)",lightsteelblue3:"rgb(162, 181, 205)",lightsteelblue4:"rgb(110, 123, 139)",lightyellow:"rgb(255, 255, 224)",lightyellow1:"rgb(255, 255, 224)",lightyellow2:"rgb(238, 238, 209)",lightyellow3:"rgb(205, 205, 180)",lightyellow4:"rgb(139, 139, 122)",limegreen:"rgb(50, 205, 50)",linen:"rgb(250, 240, 230)",magenta:"rgb(255, 0, 255)",magenta1:"rgb(255, 0, 255)",magenta2:"rgb(238, 0, 238)",magenta3:"rgb(205, 0, 205)",magenta4:"rgb(139, 0, 139)",maroon:"rgb(176, 48, 96)",maroon1:"rgb(255, 52, 179)",maroon2:"rgb(238, 48, 167)",maroon3:"rgb(205, 41, 144)",maroon4:"rgb(139, 28, 98)",mediumaquamarine:"rgb(102, 205, 170)",mediumblue:"rgb(0, 0, 205)",mediumorchid:"rgb(186, 85, 211)",mediumorchid1:"rgb(224, 102, 255)",mediumorchid2:"rgb(209, 95, 238)",mediumorchid3:"rgb(180, 82, 205)",mediumorchid4:"rgb(122, 55, 139)",mediumpurple:"rgb(147, 112, 219)",mediumpurple1:"rgb(171, 130, 255)",mediumpurple2:"rgb(159, 121, 238)",mediumpurple3:"rgb(137, 104, 205)",mediumpurple4:"rgb(93, 71, 139)",mediumseagreen:"rgb(60, 179, 113)",mediumslateblue:"rgb(123, 104, 238)",mediumspringgreen:"rgb(0, 250, 154)",mediumturquoise:"rgb(72, 209, 204)",mediumvioletred:"rgb(199, 21, 133)",midnightblue:"rgb(25, 25, 112)",mintcream:"rgb(245, 255, 250)",mistyrose:"rgb(255, 228, 225)",mistyrose1:"rgb(255, 228, 225)",mistyrose2:"rgb(238, 213, 210)",mistyrose3:"rgb(205, 183, 181)",mistyrose4:"rgb(139, 125, 123)",moccasin:"rgb(255, 228, 181)",navajowhite:"rgb(255, 222, 173)",navajowhite1:"rgb(255, 222, 173)",navajowhite2:"rgb(238, 207, 161)",navajowhite3:"rgb(205, 179, 139)",navajowhite4:"rgb(139, 121, 94)",navy:"rgb(0, 0, 128)",navyblue:"rgb(0, 0, 128)",oldlace:"rgb(253, 245, 230)",olivedrab:"rgb(107, 142, 35)",olivedrab1:"rgb(192, 255, 62)",olivedrab2:"rgb(179, 238, 58)",olivedrab3:"rgb(154, 205, 50)",olivedrab4:"rgb(105, 139, 34)",orange:"rgb(255, 165, 0)",orange1:"rgb(255, 165, 0)",orange2:"rgb(238, 154, 0)",orange3:"rgb(205, 133, 0)",orange4:"rgb(139, 90, 0)",orangered:"rgb(255, 69, 0)",orangered1:"rgb(255, 69, 0)",orangered2:"rgb(238, 64, 0)",orangered3:"rgb(205, 55, 0)",orangered4:"rgb(139, 37, 0)",orchid:"rgb(218, 112, 214)",orchid1:"rgb(255, 131, 250)",orchid2:"rgb(238, 122, 233)",orchid3:"rgb(205, 105, 201)",orchid4:"rgb(139, 71, 137)",palegoldenrod:"rgb(238, 232, 170)",palegreen:"rgb(152, 251, 152)",palegreen1:"rgb(154, 255, 154)",palegreen2:"rgb(144, 238, 144)",palegreen3:"rgb(124, 205, 124)",palegreen4:"rgb(84, 139, 84)",paleturquoise:"rgb(175, 238, 238)",paleturquoise1:"rgb(187, 255, 255)",paleturquoise2:"rgb(174, 238, 238)",paleturquoise3:"rgb(150, 205, 205)",paleturquoise4:"rgb(102, 139, 139)",palevioletred:"rgb(219, 112, 147)",palevioletred1:"rgb(255, 130, 171)",palevioletred2:"rgb(238, 121, 159)",palevioletred3:"rgb(205, 104, 137)",palevioletred4:"rgb(139, 71, 93)",papayawhip:"rgb(255, 239, 213)",peachpuff:"rgb(255, 218, 185)",peachpuff1:"rgb(255, 218, 185)",peachpuff2:"rgb(238, 203, 173)",peachpuff3:"rgb(205, 175, 149)",peachpuff4:"rgb(139, 119, 101)",peru:"rgb(205, 133, 63)",pink:"rgb(255, 192, 203)",pink1:"rgb(255, 181, 197)",pink2:"rgb(238, 169, 184)",pink3:"rgb(205, 145, 158)",pink4:"rgb(139, 99, 108)",plum:"rgb(221, 160, 221)",plum1:"rgb(255, 187, 255)",plum2:"rgb(238, 174, 238)",plum3:"rgb(205, 150, 205)",plum4:"rgb(139, 102, 139)",powderblue:"rgb(176, 224, 230)",purple:"rgb(160, 32, 240)",purple1:"rgb(155, 48, 255)",purple2:"rgb(145, 44, 238)",purple3:"rgb(125, 38, 205)",purple4:"rgb(85, 26, 139)",red:"rgb(255, 0, 0)",red1:"rgb(255, 0, 0)",red2:"rgb(238, 0, 0)",red3:"rgb(205, 0, 0)",red4:"rgb(139, 0, 0)",rosybrown:"rgb(188, 143, 143)",rosybrown1:"rgb(255, 193, 193)",rosybrown2:"rgb(238, 180, 180)",rosybrown3:"rgb(205, 155, 155)",rosybrown4:"rgb(139, 105, 105)",royalblue:"rgb(65, 105, 225)",royalblue1:"rgb(72, 118, 255)",royalblue2:"rgb(67, 110, 238)",royalblue3:"rgb(58, 95, 205)",royalblue4:"rgb(39, 64, 139)",saddlebrown:"rgb(139, 69, 19)",salmon:"rgb(250, 128, 114)",salmon1:"rgb(255, 140, 105)",salmon2:"rgb(238, 130, 98)",salmon3:"rgb(205, 112, 84)",salmon4:"rgb(139, 76, 57)",sandybrown:"rgb(244, 164, 96)",seagreen:"rgb(46, 139, 87)",seagreen1:"rgb(84, 255, 159)",seagreen2:"rgb(78, 238, 148)",seagreen3:"rgb(67, 205, 128)",seagreen4:"rgb(46, 139, 87)",seashell:"rgb(255, 245, 238)",seashell1:"rgb(255, 245, 238)",seashell2:"rgb(238, 229, 222)",seashell3:"rgb(205, 197, 191)",seashell4:"rgb(139, 134, 130)",sienna:"rgb(160, 82, 45)",sienna1:"rgb(255, 130, 71)",sienna2:"rgb(238, 121, 66)",sienna3:"rgb(205, 104, 57)",sienna4:"rgb(139, 71, 38)",skyblue:"rgb(135, 206, 235)",skyblue1:"rgb(135, 206, 255)",skyblue2:"rgb(126, 192, 238)",skyblue3:"rgb(108, 166, 205)",skyblue4:"rgb(74, 112, 139)",slateblue:"rgb(106, 90, 205)",slateblue1:"rgb(131, 111, 255)",slateblue2:"rgb(122, 103, 238)",slateblue3:"rgb(105, 89, 205)",slateblue4:"rgb(71, 60, 139)",slategray:"rgb(112, 128, 144)",slategray1:"rgb(198, 226, 255)",slategray2:"rgb(185, 211, 238)",slategray3:"rgb(159, 182, 205)",slategray4:"rgb(108, 123, 139)",slategrey:"rgb(112, 128, 144)",snow:"rgb(255, 250, 250)",snow1:"rgb(255, 250, 250)",snow2:"rgb(238, 233, 233)",snow3:"rgb(205, 201, 201)",snow4:"rgb(139, 137, 137)",springgreen:"rgb(0, 255, 127)",springgreen1:"rgb(0, 255, 127)",springgreen2:"rgb(0, 238, 118)",springgreen3:"rgb(0, 205, 102)",springgreen4:"rgb(0, 139, 69)",steelblue:"rgb(70, 130, 180)",steelblue1:"rgb(99, 184, 255)",steelblue2:"rgb(92, 172, 238)",steelblue3:"rgb(79, 148, 205)",steelblue4:"rgb(54, 100, 139)",tan:"rgb(210, 180, 140)",tan1:"rgb(255, 165, 79)",tan2:"rgb(238, 154, 73)",tan3:"rgb(205, 133, 63)",tan4:"rgb(139, 90, 43)",thistle:"rgb(216, 191, 216)",thistle1:"rgb(255, 225, 255)",thistle2:"rgb(238, 210, 238)",thistle3:"rgb(205, 181, 205)",thistle4:"rgb(139, 123, 139)",tomato:"rgb(255, 99, 71)",tomato1:"rgb(255, 99, 71)",tomato2:"rgb(238, 92, 66)",tomato3:"rgb(205, 79, 57)",tomato4:"rgb(139, 54, 38)",turquoise:"rgb(64, 224, 208)",turquoise1:"rgb(0, 245, 255)",turquoise2:"rgb(0, 229, 238)",turquoise3:"rgb(0, 197, 205)",turquoise4:"rgb(0, 134, 139)",violet:"rgb(238, 130, 238)",violetred:"rgb(208, 32, 144)",violetred1:"rgb(255, 62, 150)",violetred2:"rgb(238, 58, 140)",violetred3:"rgb(205, 50, 120)",violetred4:"rgb(139, 34, 82)",wheat:"rgb(245, 222, 179)",wheat1:"rgb(255, 231, 186)",wheat2:"rgb(238, 216, 174)",wheat3:"rgb(205, 186, 150)",wheat4:"rgb(139, 126, 102)",white:"rgb(255, 255, 255)",whitesmoke:"rgb(245, 245, 245)",yellow:"rgb(255, 255, 0)",yellow1:"rgb(255, 255, 0)",yellow2:"rgb(238, 238, 0)",yellow3:"rgb(205, 205, 0)",yellow4:"rgb(139, 139, 0)",yellowgreen:"rgb(154, 205, 50)"}
}),define("hterm/util/dom",["exports"],function(a){"use strict";var b={};a.dom=b,a["default"]=b,b.getClientSize=function(a){return a.getBoundingClientRect()},b.getClientWidth=function(a){return a.getBoundingClientRect().width},b.getClientHeight=function(a){return a.getBoundingClientRect().height},b.copySelectionToClipboard=function(a){try{a.execCommand("copy")}catch(b){}},b.pasteFromClipboard=function(a){try{a.execCommand("paste")}catch(b){}}}),define("hterm/util/f",["exports"],function(a){"use strict";var b={};a.f=b,a["default"]=b,b.getAcceptLanguages=function(a){window.chrome&&window.chrome.i18n?window.chrome.i18n.getAcceptLanguages(a):setTimeout(function(){a([navigator.language.replace(/-/g,"_")])},0)},b.parseQuery=function(a){"?"==a.substr(0,1)&&(a=a.substr(1));for(var b={},c=a.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");b[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return b},b.clamp=function(a,b,c){return b>a?b:a>c?c:a},b.alarm=function(a,c){var d=c||5e3,e=b.getStack(1);return function(){var b=setTimeout(function(){var c="string"==typeof a?c:a.name;c=c?": "+c:"",console.warn("f.alarm: timeout expired: "+d/1e3+"s"+c),console.log(e),b=null},d),c=function(a){return function(){return b&&(clearTimeout(b),b=null),a.apply(null,arguments)}};return"string"==typeof a?c:c(a)}()},b.getStack=function(a){var b,c=a?a+2:2;try{throw new Error}catch(d){b=d.stack.split("\n")}for(var e={},f=c;f<b.length;f++)e[f-c]=b[f].replace(/^\s*at\s+/,"");return e}}),define("hterm/util/pubsub",["exports"],function(a){"use strict";var b=function(){this.observers_={}};a.PubSub=b,a["default"]=b,b.addBehavior=function(a){var c=new b;for(var d in b.prototype)a[d]=b.prototype[d].bind(c)},b.prototype.subscribe=function(a,b){a in this.observers_||(this.observers_[a]=[]),this.observers_[a].push(b)},b.prototype.unsubscribe=function(a,b){var c=this.observers_[a];if(!c)throw"Invalid subject: "+a;var d=c.indexOf(b);if(0>d)throw"Not subscribed: "+a;c.splice(d,1)},b.prototype.publish=function(a,b,c){function d(a){a<e.length-1&&setTimeout(d,0,a+1),e[a](b)}var e=this.observers_[a];e&&(e=[].concat(e)),c&&(e?e.push(c):e=[c]),e&&setTimeout(d,0,0)}}),define("hterm/util/string",["exports"],function(a){"use strict";var b={};a.string=b,a["default"]=b,b.replaceVars=function(a,c){return a.replace(/%([a-z]*)\(([^\)]+)\)/gi,function(a,d,e){if("undefined"==typeof c[e])throw"Unknown variable: "+e;var f=c[e];if(d in b.replaceVars.functions)f=b.replaceVars.functions[d](f);else if(d)throw"Unknown escape function: "+d;return f})},b.replaceVars.functions={encodeURI:encodeURI,encodeURIComponent:encodeURIComponent,escapeHTML:function(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"};return a.replace(/[<>&\"\']/g,function(a){return b[a]})}},b.lpad=function(a,b,c){for(a=String(a),c=c||" ";a.length<b;)a=c+a;return a},b.zpad=function(a,c){return b.lpad(a,c,"0")},b.getWhitespace=function(a){if(0===a)return"";var b=this.getWhitespace;for(b.whitespace||(b.whitespace="          ");a>b.whitespace.length;)b.whitespace+=b.whitespace;return b.whitespace.substr(0,a)}}),define("hterm/vt",["hterm/i18n/utf8","hterm/util","hterm/struct/cursor_shape","hterm/character_map","exports"],function(a,b,c,d,e){"use strict";var f=a["default"],g=b["default"],h=c["default"],i=d["default"],j=function(a){this.terminal=a,a.onMouse=this.onTerminalMouse_.bind(this),this.mouseReport=this.MOUSE_REPORT_DISABLED,this.parseState_=new j.ParseState(this.parseUnknown_),this.leadingModifier_="",this.trailingModifier_="",this.allowColumnWidthChanges_=!1,this.oscTimeLimit_=2e4;var b=Object.keys(j.CC1).map(function(a){return"\\x"+g.string.zpad(a.charCodeAt().toString(16),2)}).join("");this.cc1Pattern_=new RegExp("["+b+"]"),this.utf8Decoder_=new f.Decoder,this.enable8BitControl=!1,this.enableClipboardWrite=!0,this.enableDec12=!1,this.characterEncoding="utf-8",this.maxStringSequence=a.config.get("max-string-sequence"),this.warnUnimplemented=!0,this.G0=i.maps.B,this.G1=i.maps[0],this.G2=i.maps.B,this.G3=i.maps.B,this.GL="G0",this.GR="G0",this.savedState_=new j.CursorState(this)};e.VT=j,e["default"]=j,j.prototype.MOUSE_REPORT_DISABLED=0,j.prototype.MOUSE_REPORT_CLICK=1,j.prototype.MOUSE_REPORT_DRAG=3,j.ParseState=function(a,b){this.defaultFunction=a,this.buf=b||null,this.pos=0,this.func=a,this.args=[]},j.ParseState.prototype.reset=function(a){this.resetParseFunction(),this.resetBuf(a||""),this.resetArguments()},j.ParseState.prototype.resetParseFunction=function(){this.func=this.defaultFunction},j.ParseState.prototype.resetBuf=function(a){this.buf="string"==typeof a?a:null,this.pos=0},j.ParseState.prototype.resetArguments=function(a){this.args.length=0,"undefined"!=typeof a&&(this.args[0]=a)},j.ParseState.prototype.iarg=function(a,b){var c=this.args[a];if(c){var d=parseInt(c,10);return 0===d&&(d=b),d}return b},j.ParseState.prototype.advance=function(a){this.pos+=a},j.ParseState.prototype.peekRemainingBuf=function(){return this.buf.substr(this.pos)},j.ParseState.prototype.peekChar=function(){return this.buf.substr(this.pos,1)},j.ParseState.prototype.consumeChar=function(){return this.buf.substr(this.pos++,1)},j.ParseState.prototype.isComplete=function(){return null==this.buf||this.buf.length<=this.pos},j.CursorState=function(a){this.vt_=a,this.save()},j.CursorState.prototype.save=function(){this.cursor=this.vt_.terminal.saveCursor(),this.textAttributes=this.vt_.terminal.getTextAttributes().clone(),this.GL=this.vt_.GL,this.GR=this.vt_.GR,this.G0=this.vt_.G0,this.G1=this.vt_.G1,this.G2=this.vt_.G2,this.G3=this.vt_.G3},j.CursorState.prototype.restore=function(){this.vt_.terminal.restoreCursor(this.cursor),this.vt_.terminal.setTextAttributes(this.textAttributes.clone()),this.vt_.GL=this.GL,this.vt_.GR=this.GR,this.vt_.G0=this.G0,this.vt_.G1=this.G1,this.vt_.G2=this.G2,this.vt_.G3=this.G3},j.prototype.reset=function(){this.G0=i.maps.B,this.G1=i.maps[0],this.G2=i.maps.B,this.G3=i.maps.B,this.GL="G0",this.GR="G0",this.savedState_=new j.CursorState(this),this.mouseReport=this.MOUSE_REPORT_DISABLED},j.prototype.onTerminalMouse_=function(a){if(this.mouseReport!=this.MOUSE_REPORT_DISABLED){var b,c=0;a.shiftKey&&(c|=4),(a.metaKey||this.terminal.keyboard.altIsMeta&&a.altKey)&&(c|=8),a.ctrlKey&&(c|=16);var d,e=String.fromCharCode(g.f.clamp(a.terminalColumn+32,32,255)),f=String.fromCharCode(g.f.clamp(a.terminalRow+32,32,255));switch(a.type){case"mousewheel":d=(a.wheelDeltaY>0?0:1)+96,d|=c,b="[M"+String.fromCharCode(d)+e+f,a.preventDefault();break;case"mousedown":d=Math.min(a.which-1,2)+32,d|=c,b="[M"+String.fromCharCode(d)+e+f;break;case"mouseup":b="[M#"+e+f;break;case"mousemove":this.mouseReport==this.MOUSE_REPORT_DRAG&&a.which&&(d=32+Math.min(a.which-1,2),d+=32,d|=c,b="[M"+String.fromCharCode(d)+e+f);break;case"click":case"dblclick":break;default:console.error("Unknown mouse event: "+a.type,a)}b&&this.terminal.io.sendString(b)}},j.prototype.interpret=function(a){for(this.parseState_.resetBuf(this.decode(a));!this.parseState_.isComplete();){var b=this.parseState_.func,c=this.parseState_.pos;if(a=this.parseState_.buf,this.parseState_.func.call(this,this.parseState_),this.parseState_.func==b&&this.parseState_.pos==c&&this.parseState_.buf==a)throw"Parser did not alter the state!"}},j.prototype.decode=function(a){return"utf-8"==this.characterEncoding?this.decodeUTF8(a):a},j.prototype.encodeUTF8=function(a){return f.encode(a)},j.prototype.decodeUTF8=function(a){return this.utf8Decoder_.decode(a)},j.prototype.parseUnknown_=function(a){var b=this,c=function(a){b[b.GL].GL&&(a=b[b.GL].GL(a)),b[b.GR].GR&&(a=b[b.GR].GR(a)),b.terminal.print(a)},d=a.peekRemainingBuf(),e=d.search(this.cc1Pattern_);return 0===e?(this.dispatch("CC1",d.substr(0,1),a),void a.advance(1)):-1==e?(c(d),void a.reset()):(c(d.substr(0,e)),this.dispatch("CC1",d.substr(e,1),a),void a.advance(e+1))},j.prototype.parseCSI_=function(a){var b=a.peekChar(),c=a.args;b>="@"&&"~">=b?(this.dispatch("CSI",this.leadingModifier_+this.trailingModifier_+b,a),a.resetParseFunction()):";"==b?this.trailingModifier_?a.resetParseFunction():(c.length||c.push(""),c.push("")):b>="0"&&"9">=b?this.trailingModifier_?a.resetParseFunction():c.length?c[c.length-1]+=b:c[0]=b:b>=" "&&"?">=b&&":"!=b?c.length?this.trailingModifier_+=b:this.leadingModifier_+=b:this.cc1Pattern_.test(b)?this.dispatch("CC1",b,a):a.resetParseFunction(),a.advance(1)},j.prototype.parseUntilStringTerminator_=function(a){var b=a.peekRemainingBuf(),c=b.search(/(\x1b\\|\x07)/),d=a.args;if(d.length||(d[0]="",d[1]=new Date),-1==c){d[0]+=b;var e;return d[0].length>this.maxStringSequence&&(e="too long: "+d[0].length),-1!=d[0].indexOf("")&&(e="embedded escape: "+d[0].indexOf("")),new Date-d[1]>this.oscTimeLimit_&&(e="timeout expired: "+new Date-d[1]),e?(console.log("parseUntilStringTerminator_: aborting: "+e,d[0]),a.reset(d[0]),!1):(a.advance(b.length),!0)}return d[0].length+c>this.maxStringSequence?(a.reset(d[0]+b),!1):(d[0]+=b.substr(0,c),a.resetParseFunction(),a.advance(c+(""==b.substr(c,1)?2:1)),!0)},j.prototype.dispatch=function(a,b,c){var d=j[a][b];return d?d==j.ignore?void(this.warnUnimplemented&&console.warn("Ignored "+a+" code: "+JSON.stringify(b))):"CC1"==a&&b>""&&!this.enable8BitControl?void console.warn("Ignoring 8-bit control code: 0x"+b.charCodeAt(0).toString(16)):void d.apply(this,[c,b]):void(this.warnUnimplemented&&console.warn("Unknown "+a+" code: "+JSON.stringify(b)))},j.prototype.setANSIMode=function(a,b){"4"==a?this.terminal.setInsertMode(b):"20"==a?this.terminal.setAutoCarriageReturn(b):this.warnUnimplemented&&console.warn("Unimplemented ANSI Mode: "+a)},j.prototype.setDECMode=function(a,b){switch(a){case"1":this.terminal.keyboard.applicationCursor=b;break;case"3":this.allowColumnWidthChanges_&&(this.terminal.setWidth(b?132:80),this.terminal.clearHome(),this.terminal.setVTScrollRegion(null,null));break;case"5":this.terminal.setReverseVideo(b);break;case"6":this.terminal.setOriginMode(b);break;case"7":this.terminal.setWraparound(b);break;case"12":this.enableDec12&&this.terminal.setCursorBlink(b);break;case"25":this.terminal.setCursorVisible(b);break;case"40":this.terminal.allowColumnWidthChanges_=b;break;case"45":this.terminal.setReverseWraparound(b);break;case"67":this.terminal.keyboard.backspaceSendsBackspace=b;break;case"1000":this.mouseReport=b?this.MOUSE_REPORT_CLICK:this.MOUSE_REPORT_DISABLED;break;case"1002":this.mouseReport=b?this.MOUSE_REPORT_DRAG:this.MOUSE_REPORT_DISABLED;break;case"1010":this.terminal.scrollOnOutput=b;break;case"1011":this.terminal.scrollOnKeystroke=b;break;case"1036":this.terminal.keyboard.metaSendsEscape=b;break;case"1039":this.terminal.keyboard.altSendsEscape=b;break;case"47":case"1047":this.terminal.setAlternateMode(b);break;case"1048":this.savedState_.save();case"1049":b?(this.savedState_.save(),this.terminal.setAlternateMode(b),this.terminal.clear()):(this.terminal.setAlternateMode(b),this.savedState_.restore());break;case"2004":this.terminal.setBracketedPaste(b);break;default:this.warnUnimplemented&&console.warn("Unimplemented DEC Private Mode: "+a)}},j.ignore=function(){},j.CC1={},j.ESC={},j.CSI={},j.OSC={},j.VT52={},j.CC1["\x00"]=function(){},j.CC1[""]=j.ignore,j.CC1[""]=function(){this.terminal.ringBell()},j.CC1["\b"]=function(){this.terminal.cursorLeft(1)},j.CC1["	"]=function(){this.terminal.forwardTabStop()},j.CC1["\n"]=function(){this.terminal.formFeed()},j.CC1[""]=j.CC1["\n"],j.CC1["\f"]=function(){this.terminal.formFeed()},j.CC1["\r"]=function(){this.terminal.setCursorColumn(0)},j.CC1[""]=function(){this.GL="G1"},j.CC1[""]=function(){this.GL="G0"},j.CC1[""]=j.ignore,j.CC1[""]=j.ignore,j.CC1[""]=function(a){a.resetParseFunction(),this.terminal.print("?")},j.CC1[""]=j.CC1[""],j.CC1[""]=function(a){var b=function(a){var c=a.consumeChar();""!=c&&(this.dispatch("ESC",c,a),a.func==b&&a.resetParseFunction())};a.func=b},j.CC1[""]=j.ignore,j.CC1["Â„"]=j.ESC.D=function(){this.terminal.lineFeed()},j.CC1["Â…"]=j.ESC.E=function(){this.terminal.setCursorColumn(0),this.terminal.cursorDown(1)},j.CC1["Âˆ"]=j.ESC.H=function(){this.terminal.setTabStop(this.terminal.getCursorColumn())},j.CC1["Â"]=j.ESC.M=function(){this.terminal.reverseLineFeed()},j.CC1["ÂŽ"]=j.ESC.N=j.ignore,j.CC1["Â"]=j.ESC.O=j.ignore,j.CC1["Â"]=j.ESC.P=function(a){a.resetArguments(),a.func=this.parseUntilStringTerminator_},j.CC1["Â–"]=j.ESC.V=j.ignore,j.CC1["Â—"]=j.ESC.W=j.ignore,j.CC1["Â˜"]=j.ESC.X=j.ignore,j.CC1["Âš"]=j.ESC.Z=function(){this.terminal.io.sendString("[?1;2c")},j.CC1["Â›"]=j.ESC["["]=function(a){a.resetArguments(),this.leadingModifier_="",this.trailingModifier_="",a.func=this.parseCSI_},j.CC1["Âœ"]=j.ESC["\\"]=j.ignore,j.CC1["Â"]=j.ESC["]"]=function(a){a.resetArguments();var b=function(a){if(this.parseUntilStringTerminator_(a)&&a.func!=b){var c=a.args[0].match(/^(\d+);(.*)$/);c?(a.args[0]=c[2],this.dispatch("OSC",c[1],a)):console.warn("Invalid OSC: "+JSON.stringify(a.args[0]))}};a.func=b},j.CC1["Âž"]=j.ESC["^"]=function(a){a.resetArguments(),a.func=this.parseUntilStringTerminator_},j.CC1["ÂŸ"]=j.ESC._=function(a){a.resetArguments(),a.func=this.parseUntilStringTerminator_},j.ESC[" "]=function(a){a.func=function(a){var b=a.consumeChar();this.warnUnimplemented&&console.warn("Unimplemented sequence: ESC 0x20 "+b),a.resetParseFunction()}},j.ESC["#"]=function(a){a.func=function(a){var b=a.consumeChar();"8"==b&&this.terminal.fill("E"),a.resetParseFunction()}},j.ESC["%"]=function(a){a.func=function(a){var b=a.consumeChar();"@"!=b&&"G"!=b&&this.warnUnimplemented&&console.warn("Unknown ESC % argument: "+JSON.stringify(b)),a.resetParseFunction()}},j.ESC["("]=j.ESC[")"]=j.ESC["*"]=j.ESC["+"]=j.ESC["-"]=j.ESC["."]=j.ESC["/"]=function(a,b){a.func=function(a){var c=a.consumeChar();return""==c?(a.resetParseFunction(),void a.func()):(c in i.maps?"("==b?this.G0=i.maps[c]:")"==b||"-"==b?this.G1=i.maps[c]:"*"==b||"."==b?this.G2=i.maps[c]:("+"==b||"/"==b)&&(this.G3=i.maps[c]):this.warnUnimplemented&&console.log('Invalid character set for "'+b+'": '+c),void a.resetParseFunction())}},j.ESC[6]=j.ignore,j.ESC[7]=function(){this.savedState_.save()},j.ESC[8]=function(){this.savedState_.restore()},j.ESC[9]=j.ignore,j.ESC["="]=function(){this.terminal.keyboard.applicationKeypad=!0},j.ESC[">"]=function(){this.terminal.keyboard.applicationKeypad=!1},j.ESC.F=j.ignore,j.ESC.c=function(){this.reset(),this.terminal.reset()},j.ESC.l=j.ESC.m=j.ignore,j.ESC.n=function(){this.GL="G2"},j.ESC.o=function(){this.GL="G3"},j.ESC["|"]=function(){this.GR="G3"},j.ESC["}"]=function(){this.GR="G2"},j.ESC["~"]=function(){this.GR="G1"},j.OSC[0]=function(a){this.terminal.setWindowTitle(a.args[0])},j.OSC[2]=j.OSC[0],j.OSC[4]=function(a){for(var b=a.args[0].split(";"),c=parseInt(b.length/2),d=this.terminal.getTextAttributes().colorPalette,e=[],f=0;c>f;++f){var h=parseInt(b[2*f]),i=b[2*f+1];h>=d.length||("?"!=i?(i=g.colors.x11ToCSS(i),i&&(d[h]=i)):(i=g.colors.rgbToX11(d[h]),i&&e.push(h+";"+i)))}e.length&&this.terminal.io.sendString("]4;"+e.join(";")+"")},j.OSC[50]=function(a){var b=a.args[0].match(/CursorShape=(.)/i);if(!b)return void console.warn("Could not parse OSC 50 args: "+a.args[0]);switch(b[1]){case"1":this.terminal.setCursorShape(h.BEAM);break;case"2":this.terminal.setCursorShape(h.UNDERLINE);break;default:this.terminal.setCursorShape(h.BLOCK)}},j.OSC[52]=function(a){var b=a.args[0].match(/^[cps01234567]*;(.*)/);if(b){var c=window.atob(b[1]);c&&this.terminal.copyStringToClipboard(this.decode(c))}},j.CSI["@"]=function(a){this.terminal.insertSpace(a.iarg(0,1))},j.CSI.A=function(a){this.terminal.cursorUp(a.iarg(0,1))},j.CSI.B=function(a){this.terminal.cursorDown(a.iarg(0,1))},j.CSI.C=function(a){this.terminal.cursorRight(a.iarg(0,1))},j.CSI.D=function(a){this.terminal.cursorLeft(a.iarg(0,1))},j.CSI.E=function(a){this.terminal.cursorDown(a.iarg(0,1)),this.terminal.setCursorColumn(0)},j.CSI.F=function(a){this.terminal.cursorUp(a.iarg(0,1)),this.terminal.setCursorColumn(0)},j.CSI.G=function(a){this.terminal.setCursorColumn(a.iarg(0,1)-1)},j.CSI.H=function(a){this.terminal.setCursorPosition(a.iarg(0,1)-1,a.iarg(1,1)-1)},j.CSI.I=function(a){var b=a.iarg(0,1);b=g.f.clamp(b,1,this.terminal.screenSize.width);for(var c=0;b>c;c++)this.terminal.forwardTabStop()},j.CSI.J=j.CSI["?J"]=function(a){var b=a.args[0];b&&"0"!=b?"1"==b?this.terminal.eraseAbove():"2"==b?this.terminal.clear():"3"==b&&this.terminal.clear():this.terminal.eraseBelow()},j.CSI.K=j.CSI["?K"]=function(a){var b=a.args[0];b&&"0"!=b?"1"==b?this.terminal.eraseToLeft():"2"==b&&this.terminal.eraseLine():this.terminal.eraseToRight()},j.CSI.L=function(a){this.terminal.insertLines(a.iarg(0,1))},j.CSI.M=function(a){this.terminal.deleteLines(a.iarg(0,1))},j.CSI.P=function(a){this.terminal.deleteChars(a.iarg(0,1))},j.CSI.S=function(a){this.terminal.vtScrollUp(a.iarg(0,1))},j.CSI.T=function(a){a.args.length<=1&&this.terminal.vtScrollDown(a.iarg(0,1))},j.CSI[">T"]=j.ignore,j.CSI.X=function(a){this.terminal.eraseToRight(a.iarg(0,1))},j.CSI.Z=function(a){var b=a.iarg(0,1);b=g.f.clamp(b,1,this.terminal.screenSize.width);for(var c=0;b>c;c++)this.terminal.backwardTabStop()},j.CSI["`"]=function(a){this.terminal.setCursorColumn(a.iarg(0,1)-1)},j.CSI.b=j.ignore,j.CSI.c=function(a){a.args[0]&&"0"!=a.args[0]||this.terminal.io.sendString("[?1;2c")},j.CSI[">c"]=function(){this.terminal.io.sendString("[>0;256;0c")},j.CSI.d=function(a){this.terminal.setAbsoluteCursorRow(a.iarg(0,1)-1)},j.CSI.f=j.CSI.H,j.CSI.g=function(a){a.args[0]&&"0"!=a.args[0]?"3"==a.args[0]&&this.terminal.clearAllTabStops():this.terminal.clearTabStopAtCursor(!1)},j.CSI.h=function(a){for(var b=0;b<a.args.length;b++)this.setANSIMode(a.args[b],!0)},j.CSI["?h"]=function(a){for(var b=0;b<a.args.length;b++)this.setDECMode(a.args[b],!0)},j.CSI.i=j.CSI["?i"]=j.ignore,j.CSI.l=function(a){for(var b=0;b<a.args.length;b++)this.setANSIMode(a.args[b],!1)},j.CSI["?l"]=function(a){for(var b=0;b<a.args.length;b++)this.setDECMode(a.args[b],!1)},j.CSI.m=function(a){function b(b){return a.args.length<b+2||"5"!=a.args[b+1]?null:a.iarg(b+2,0)}function c(b){if(a.args.length<b+5||"2"!=a.args[b+1])return null;var c=a.iarg(b+2,0),d=a.iarg(b+3,0),e=a.iarg(b+4,0);return"rgb("+c+" ,"+d+" ,"+e+")"}var d=this.terminal.getTextAttributes();if(!a.args.length)return void d.reset();for(var e,f,g=0;g<a.args.length;g++){var h=a.iarg(g,0);if(30>h)0===h?d.reset():1==h?d.bold=!0:3==h?d.italic=!0:4==h?d.underline=!0:5==h?d.blink=!0:7==h?d.inverse=!0:8==h?d.invisible=!0:22==h?d.bold=!1:23==h?d.italic=!1:24==h?d.underline=!1:25==h?d.blink=!1:27==h?d.inverse=!1:28==h&&(d.invisible=!1);else if(50>h)if(38>h)d.foregroundSource=h-30;else if(38==h)if(e=c(g),null!=e)d.foregroundSource=d.SRC_RGB,d.foreground=e,g+=5;else{if(f=b(g),null==f)break;if(g+=2,f>=d.colorPalette.length)continue;d.foregroundSource=f}else if(39==h)d.foregroundSource=d.SRC_DEFAULT;else if(48>h)d.backgroundSource=h-40;else if(48==h)if(e=c(g),null!=e)d.backgroundSource=d.SRC_RGB,d.background=e,g+=5;else{if(f=b(g),null==f)break;if(g+=2,f>=d.colorPalette.length)continue;d.backgroundSource=f}else d.backgroundSource=d.SRC_DEFAULT;else h>=90&&97>=h?d.foregroundSource=h-90+8:h>=100&&107>=h&&(d.backgroundSource=h-100+8)}d.setDefaults(this.terminal.getForegroundColor(),this.terminal.getBackgroundColor())},j.CSI[">m"]=j.ignore,j.CSI.n=function(a){if("5"==a.args[0])this.terminal.io.sendString("0n");else if("6"==a.args[0]){var b=this.terminal.getCursorRow()+1,c=this.terminal.getCursorColumn()+1;this.terminal.io.sendString("["+b+";"+c+"R")}},j.CSI[">n"]=j.ignore,j.CSI["?n"]=function(a){if("6"==a.args[0]){var b=this.terminal.getCursorRow()+1,c=this.terminal.getCursorColumn()+1;this.terminal.io.sendString("["+b+";"+c+"R")}else"15"==a.args[0]?this.terminal.io.sendString("[?11n"):"25"==a.args[0]?this.terminal.io.sendString("[?21n"):"26"==a.args[0]?this.terminal.io.sendString("[?12;1;0;0n"):"53"==a.args[0]&&this.terminal.io.sendString("[?50n")},j.CSI[">p"]=j.ignore,j.CSI["!p"]=function(){this.reset(),this.terminal.softReset()},j.CSI.$p=j.ignore,j.CSI["?$p"]=j.ignore,j.CSI['"p']=j.ignore,j.CSI.q=j.ignore,j.CSI[" q"]=function(a){var b=a.args[0];"0"==b||"1"==b?(this.terminal.setCursorShape(h.BLOCK),this.terminal.setCursorBlink(!0)):"2"==b?(this.terminal.setCursorShape(h.BLOCK),this.terminal.setCursorBlink(!1)):"3"==b?(this.terminal.setCursorShape(h.UNDERLINE),this.terminal.setCursorBlink(!0)):"4"==b?(this.terminal.setCursorShape(h.UNDERLINE),this.terminal.setCursorBlink(!1)):console.warn("Unknown cursor style: "+b)},j.CSI['"q']=j.ignore,j.CSI.r=function(a){var b=a.args,c=b[0]?parseInt(b[0],10)-1:null,d=b[1]?parseInt(b[1],10)-1:null;this.terminal.setVTScrollRegion(c,d),this.terminal.setCursorPosition(0,0)},j.CSI["?r"]=j.ignore,j.CSI.$r=j.ignore,j.CSI.s=function(){this.savedState_.save()},j.CSI["?s"]=j.ignore,j.CSI.t=j.ignore,j.CSI.$t=j.ignore,j.CSI[">t"]=j.ignore,j.CSI[" t"]=j.ignore,j.CSI.u=function(){this.savedState_.restore()},j.CSI[" u"]=j.ignore,j.CSI.$v=j.ignore,j.CSI["'w"]=j.ignore,j.CSI.x=j.ignore,j.CSI["*x"]=j.ignore,j.CSI.$x=j.ignore,j.CSI.z=function(a){if(!(a.args.length<1)){var b=a.args[0];if("0"==b){if(a.args.length<2)return;this.terminal.getTextAttributes().tileData=a.args[1]}else"1"==b&&(this.terminal.getTextAttributes().tileData=null)}},j.CSI["'z"]=j.ignore,j.CSI.$z=j.ignore,j.CSI["'{"]=j.ignore,j.CSI["'|"]=j.ignore,j.CSI[" }"]=j.ignore,j.CSI[" ~"]=j.ignore});